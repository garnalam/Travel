    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dashboard - Vietnam Travel</title>
        <script src="https://lib.youware.com/youware-lib-editor.1754557047.js" id="yourware-lib"></script><script src="https://lib.youware.com/youware-lib-editor.1754557047.js" id="yourware-lib"></script><script src="https://lib.youware.com/youware-lib-editor.1754557047.js" id="yourware-lib"></script><script src="https://lib.youware.com/youware-lib-editor.1754557047.js" id="yourware-lib"></script><script src="https://lib.youware.com/youware-lib-editor.1754557047.js" id="yourware-lib"></script><script src="https://lib.youware.com/youware-lib-editor.1754557047.js" id="yourware-lib"></script><script src="https://lib.youware.com/youware-lib-editor.1754557047.js" id="yourware-lib"></script><script src="https://lib.youware.com/youware-lib-editor.1754557047.js" id="yourware-lib"></script><script src="https://lib.youware.com/youware-lib-editor.1754557047.js" id="yourware-lib"></script><script src="https://lib.youware.com/youware-lib-editor.1754557047.js" id="yourware-lib"></script><script src="https://lib.youware.com/youware-lib-editor.1754557047.js" id="yourware-lib"></script><script src="https://lib.youware.com/youware-lib-editor.1754557047.js" id="yourware-lib"></script><script src="https://lib.youware.com/youware-lib-editor.1752562065.js" id="yourware-lib"></script>
        <script src="https://cdn.tailwindcss.com/3.4.16"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
        <link rel="stylesheet" href="https://public.youware.com/users-website-assets/prod/0aebb26b-6df2-4a65-b76c-5567b44e6aa6/e06f1a84e783465fb2c3cbe5c8a497d9.css">
        <link rel="stylesheet" href="assets/css/style.css">
        <link rel="stylesheet" href="assets/css/tour-history.css">
        <script src="assets/js/libs/youware-lib.js"></script>
        <script src="assets/js/libs/script-local.js"></script>
        <script src="assets/js/libs/user_interface_config.js"></script>
        <script src="https://public.youware.com/users-website-assets/prod/0aebb26b-6df2-4a65-b76c-5567b44e6aa6/6cea07a83bb94affa00dceba42423cad.js"></script>
    </head>

    <body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
        <!-- Enhanced Header -->
        <header class="glass-card border-b backdrop-blur-lg sticky top-0 z-40">
            <div class="container mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <div
                            class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-plane text-white text-lg"></i>
                        </div>
                        <div>
                            <h1 class="text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent"
                                data-en="Vietnam Travel Dashboard" data-vi="Bảng Điều Khiển Du Lịch Việt Nam">Vietnam Travel
                                Dashboard</h1>
                            <p class="text-xs text-gray-500" data-en="Your personalized travel companion"
                                data-vi="Người bạn đồng hành du lịch cá nhân">Your personalized travel companion</p>
                        </div>
                    </div>

                    <div class="flex items-center space-x-4">
                        <!-- Website Setup Toggle -->
                        <div class="relative">
                            <button id="websiteSetupBtn"
                                class="bg-white/80 backdrop-blur-sm text-blue-600 px-4 py-2 rounded-xl hover:bg-white/90 transition duration-300 flex items-center shadow-sm">
                                <i class="fas fa-cog mr-2"></i>
                                <span data-en="Setup" data-vi="Cài đặt">Setup</span>
                                <i class="fas fa-chevron-down text-xs ml-2"></i>
                            </button>

                            <!-- Website Setup Dropdown -->
                            <div id="websiteSetupDropdown"
                                class="absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-white/20 hidden z-50 backdrop-blur-lg">
                                <div class="p-4">
                                    <!-- Header -->
                                    <div class="border-b border-gray-100 pb-3 mb-4">
                                        <h3 class="font-bold text-gray-800 text-lg mb-1" data-en="Website Settings"
                                            data-vi="Cài đặt Trang web">Website Settings</h3>
                                        <p class="text-xs text-gray-500" data-en="Customize your experience"
                                            data-vi="Tùy chỉnh trải nghiệm của bạn">Customize your experience</p>
                                    </div>
                                    
                                    <!-- Language Section -->
                                    <div class="border-b border-gray-100 pb-4 mb-4">
                                        <h4 class="font-semibold text-gray-700 text-sm mb-3 flex items-center">
                                            <i class="fas fa-language mr-2 text-blue-500"></i>
                                            <span data-en="Language" data-vi="Ngôn ngữ">Language</span>
                                        </h4>
                                        <div class="space-y-2">
                                            <button
                                                class="language-option w-full text-left px-3 py-2 hover:bg-blue-50 rounded-lg text-sm transition duration-200 flex items-center justify-between group"
                                                data-lang="en">
                                                <span>English</span>
                                                <span id="currentLanguageIndicator" class="text-blue-600 font-medium hidden">✓</span>
                                            </button>
                                            <button
                                                class="language-option w-full text-left px-3 py-2 hover:bg-blue-50 rounded-lg text-sm transition duration-200 flex items-center justify-between group"
                                                data-lang="vi">
                                                <span>Tiếng Việt</span>
                                                <span class="text-blue-600 font-medium hidden">✓</span>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Currency Section -->
                                    <div class="border-b border-gray-100 pb-4 mb-4">
                                        <h4 class="font-semibold text-gray-700 text-sm mb-3 flex items-center">
                                            <i class="fas fa-dollar-sign mr-2 text-green-500"></i>
                                            <span data-en="Currency" data-vi="Tiền tệ">Currency</span>
                                        </h4>
                                        <div class="space-y-2">
                                            <button
                                                class="currency-option w-full text-left px-3 py-2 hover:bg-blue-50 rounded-lg text-sm transition duration-200 flex items-center justify-between group"
                                                data-currency="USD">
                                                <span>USD ($)</span>
                                                <span id="currentCurrencyIndicator" class="text-green-600 font-medium hidden">✓</span>
                                            </button>
                                            <button
                                                class="currency-option w-full text-left px-3 py-2 hover:bg-blue-50 rounded-lg text-sm transition duration-200 flex items-center justify-between group"
                                                data-currency="VND">
                                                <span>VND (₫)</span>
                                                <span class="text-green-600 font-medium hidden">✓</span>
                                            </button>
                                            <button
                                                class="currency-option w-full text-left px-3 py-2 hover:bg-blue-50 rounded-lg text-sm transition duration-200 flex items-center justify-between group"
                                                data-currency="EUR">
                                                <span>EUR (€)</span>
                                                <span class="text-green-600 font-medium hidden">✓</span>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Theme Section -->
                                    <div class="mb-4">
                                        <h4 class="font-semibold text-gray-700 text-sm mb-3 flex items-center">
                                            <i class="fas fa-palette mr-2 text-purple-500"></i>
                                            <span data-en="Theme" data-vi="Giao diện">Theme</span>
                                            <span class="text-xs text-orange-500 ml-2" data-en="(requires refresh)" 
                                                data-vi="(cần tải lại)">(requires refresh)</span>
                                        </h4>
                                        <div class="space-y-2">
                                            <button id="themeDefault"
                                                class="theme-option w-full text-left px-3 py-2 hover:bg-blue-50 rounded-lg text-sm transition duration-200 flex items-center justify-between group"
                                                data-theme="sunset">
                                                <div class="flex items-center">
                                                    <i class="fas fa-sun mr-2 text-amber-500"></i>
                                                    <span data-en="Default" data-vi="Mặc định">Default</span>
                                                </div>
                                                <span id="currentThemeDefault" class="text-purple-600 font-medium hidden">✓</span>
                                            </button>
                                            <button id="themeArctic"
                                                class="theme-option w-full text-left px-3 py-2 hover:bg-blue-50 rounded-lg text-sm transition duration-200 flex items-center justify-between group"
                                                data-theme="arctic">
                                                <div class="flex items-center">
                                                    <i class="fas fa-snowflake mr-2 text-blue-500"></i>
                                                    <span data-en="Arctic Snow" data-vi="Tuyết Bắc Cực">Arctic Snow</span>
                                                </div>
                                                <span id="currentThemeArctic" class="text-purple-600 font-medium hidden">✓</span>
                                            </button>
                                            <button id="themeCosmic"
                                                class="theme-option w-full text-left px-3 py-2 hover:bg-blue-50 rounded-lg text-sm transition duration-200 flex items-center justify-between group"
                                                data-theme="cosmic">
                                                <div class="flex items-center">
                                                    <i class="fas fa-moon mr-2 text-purple-500"></i>
                                                    <span data-en="Cosmic" data-vi="Vũ trụ">Cosmic</span>
                                                </div>
                                                <span id="currentThemeCosmic" class="text-purple-600 font-medium hidden">✓</span>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Action Buttons -->
                                    <div class="flex space-x-2 pt-3 border-t border-gray-100">
                                        <button id="applyChangesBtn"
                                            class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition duration-200">
                                            <i class="fas fa-check mr-1"></i>
                                            <span data-en="Apply Changes" data-vi="Áp dụng">Apply Changes</span>
                                        </button>
                                        <button id="cancelChangesBtn"
                                            class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm font-medium hover:bg-gray-200 transition duration-200">
                                            <i class="fas fa-times mr-1"></i>
                                            <span data-en="Cancel" data-vi="Hủy">Cancel</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Admin Panel Button (Only visible for admins) -->
                        <button id="adminPanelBtn"
                            class="admin-only bg-purple-500 text-white px-4 py-2 rounded-xl hover:bg-purple-600 transition duration-300 flex items-center shadow-sm hidden"
                            style="display: none;">
                            <i class="fas fa-cogs mr-2"></i>
                            <span data-en="Admin Panel" data-vi="Bảng Điều Khiển Admin">Admin Panel</span>
                        </button>

                        <!-- User Profile -->
                        <div
                            class="flex items-center space-x-3 bg-white/80 backdrop-blur-sm rounded-xl px-4 py-2 shadow-sm">
                            <div
                                class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm">
                                T
                            </div>
                            <div>
                                <p id="currentUserName" class="text-sm font-medium text-gray-700" data-en="Loading..." 
                                    data-vi="Đang tải...">Loading...</p>
                                <p id="currentUserEmail" class="text-xs text-gray-500">Loading...</p>
                            </div>
                        </div>

                        <!-- Logout Button -->
                        <button id="logoutBtn"
                            class="bg-red-500 text-white px-4 py-2 rounded-xl hover:bg-red-600 transition duration-300 flex items-center shadow-sm">
                            <i class="fas fa-sign-out-alt mr-2"></i>
                            <span data-en="Logout" data-vi="Đăng Xuất">Logout</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto px-6 py-8">
            <!-- Welcome Section with Stats -->
            <div class="mb-8">
                <div class="glass-card rounded-2xl p-8 mb-6">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                        <div>
                            <h2 id="welcomeMessage" class="text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent mb-2"
                                data-en="Welcome back!" data-vi="Chào mừng trở lại!">Welcome back!</h2>
                            <p class="text-gray-600" data-en="Ready to plan your next amazing adventure in Vietnam?"
                                data-vi="Sẵn sàng lên kế hoạch cho cuộc phiêu lưu tuyệt vời tiếp theo tại Việt Nam?">Ready
                                to plan your next amazing adventure in Vietnam?</p>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Travel Planning Section -->
            <div class="mb-8">
                <!-- Enhanced Search Form Card -->
                <div class="glass-card rounded-2xl p-8 search-form-card">
                    <!-- Tab Navigation -->
                    <div class="flex flex-wrap justify-between border-b border-gray-200 mb-8">
                        <button class="tab-button tab-inactive flex items-center font-medium" data-tab="travel">
                            <i class="fas fa-car mr-2"></i>
                            <span data-en="Personalized Travel tour" data-vi="Tour du lịch cá nhân">Personalized Travel
                                tour</span>
                        </button>
                        <button class="tab-button tab-active flex items-center font-medium" data-tab="hotel">
                            <i class="fas fa-building mr-2"></i>
                            <span data-en="Hotel" data-vi="Khách sạn">Hotel</span>
                        </button>
                        <button class="tab-button tab-inactive flex items-center font-medium" data-tab="airline">
                            <i class="fas fa-plane mr-2 text-orange-500"></i>
                            <span data-en="Airlines tickets" data-vi="Vé máy bay">Airlines tickets</span>
                        </button>
                        <button class="tab-button tab-inactive flex items-center font-medium" data-tab="package">
                            <span data-en="Package tour" data-vi="Tour trọn gói">Package tour</span>
                        </button>
                        <button class="tab-button tab-inactive flex items-center font-medium" data-tab="restaurant">
                            <i class="fas fa-utensils mr-2"></i>
                            <span data-en="Restaurants" data-vi="Nhà hàng">Restaurants</span>
                        </button>
                    </div>

                    <!-- Travel Tour Tab -->
                    <div id="travel-tab" class="tab-content hidden">
                        <div class="travel-form-container">
                            <!-- Step 1: Basic Travel Information -->
                            <div id="travel-step-1" class="travel-step">
                                <div class="space-y-6">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-gray-700 font-medium mb-2" data-en="Departure"
                                                data-vi="Điểm khởi hành">Departure</label>
                                            <div class="relative">
                                                <input type="text" class="form-control w-full p-3 bg-white" id="departure"
                                                    name="departure" autocomplete="off" placeholder="Enter departure city">
                                                <div id="departureAutocomplete" class="absolute z-10 bg-white shadow-lg rounded-lg border border-gray-200 w-full mt-1 max-h-60 overflow-y-auto hidden"></div>
                                            </div>
                                        </div>
                                        <div>
                                            <label class="block text-gray-700 font-medium mb-2" data-en="Destination"
                                                data-vi="Điểm đến">Destination</label>
                                            <div class="relative">
                                                <input type="text" class="form-control w-full p-3 bg-white" id="destination"
                                                    name="destination" autocomplete="off" placeholder="Enter destination city">
                                                <div id="destinationAutocomplete" class="absolute z-10 bg-white shadow-lg rounded-lg border border-gray-200 w-full mt-1 max-h-60 overflow-y-auto hidden"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-gray-700 font-medium mb-2">
                                                <span data-en="Departure time" data-vi="Giờ khởi hành">Departure time</span>
                                                <span class="text-red-500">*</span>
                                            </label>
                                            <div class="relative">
                                                <input type="time" class="form-control w-full p-3 bg-white" name="departureTime" id="departureTime"
                                                    required style="color-scheme: light;">
                                                <i class="fas fa-clock absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none" data-original-color="rgb(156, 163, 175)" style="color: rgb(14, 165, 233);"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <label class="block text-gray-700 font-medium mb-2">
                                                <span data-en="Departure date" data-vi="Ngày khởi hành">Departure date</span>
                                                <span class="text-red-500">*</span>
                                            </label>
                                            <div class="relative">
                                                <input type="date" class="form-control w-full p-3 bg-white" name="departureDate" id="departureDate"
                                                    required min="2025-07-01" style="color-scheme: light;">
                                                <i class="fas fa-calendar absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none" data-original-color="rgb(156, 163, 175)" style="color: rgb(14, 165, 233);"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-gray-700 font-medium mb-2">
                                            <span data-en="Means Of Transport" data-vi="Phương tiện di chuyển">Means Of
                                                Transport</span>
                                            <span class="text-red-500">*</span>
                                        </label>
                                        <div class="relative">
                                            <select class="form-control w-full p-3 bg-white appearance-none" id="transport"
                                                name="transport" required>
                                                <option data-en="Select Means Of Transport" data-vi="Chọn phương tiện">Select
                                                    Means Of Transport</option>
                                                <option data-en="Plane" data-vi="Máy bay">Plane</option>
                                                <option data-en="Tourist Bus" data-vi="Xe du lịch">Tourist Bus</option>
                                                <option data-en="Car" data-vi="Ô tô">Car</option>
                                            </select>
                                            <i class="fas fa-chevron-down absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400" data-original-color="rgb(156, 163, 175)" style="color: rgb(14, 165, 233);"></i>
                                        </div>
                                    </div>

                                    <!-- Continue Button for Step 1 -->
                                    <div class="flex justify-end mt-6">
                                        <button id="continue-to-step-2" class="btn-search px-8 py-3 text-white font-medium rounded-lg" disabled>
                                            <span data-en="Continue" data-vi="Tiếp tục">Continue</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 2: Trip Information at Destination -->
                            <div id="travel-step-2" class="travel-step hidden">
                                <form id="travelTourSearchForm">
                                    <div class="trip-info-section p-6">
                                        <h3 class="text-xl font-bold text-gray-800 mb-6" data-en="Trip Information at Destination"
                                            data-vi="Thông tin chuyến đi tại điểm đến">Trip Information at Destination</h3>

                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2" data-en="Hotels"
                                                    data-vi="Khách sạn">Hotels</label>
                                                <div class="relative">
                                                    <input type="text" class="form-control w-full p-3 bg-white" id="hotels"
                                                        name="hotels" autocomplete="off" placeholder="Search hotels">
                                                    <div id="hotelsAutocomplete" class="absolute z-10 bg-white shadow-lg rounded-lg border border-gray-200 w-full mt-1 max-h-60 overflow-y-auto hidden"></div>
                                                </div>
                                                <div id="selectedHotels" class="mt-2 flex flex-wrap gap-2"></div>
                                                <input type="hidden" id="hotelIds" name="hotelIds">
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2" data-en="Restaurants"
                                                    data-vi="Nhà hàng">Restaurants</label>
                                                <div class="relative">
                                                    <input type="text" class="form-control w-full p-3 bg-white" id="restaurants"
                                                        name="restaurants" autocomplete="off" placeholder="Search restaurants">
                                                    <div id="restaurantsAutocomplete" class="absolute z-10 bg-white shadow-lg rounded-lg border border-gray-200 w-full mt-1 max-h-60 overflow-y-auto hidden"></div>
                                                </div>
                                                <div id="selectedRestaurants" class="mt-2 flex flex-wrap gap-2"></div>
                                                <input type="hidden" id="restaurantIds" name="restaurantIds">
                                            </div>
                                        </div>

                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2" data-en="Recreation Places"
                                                    data-vi="Địa điểm giải trí">Recreation Places</label>
                                                <div id="activitiesList" class="border border-gray-200 rounded-lg p-4 max-h-48 overflow-y-auto">
                                                    <div class="text-gray-500 text-sm text-center" id="activitiesLoading">
                                                        <i class="fas fa-spinner fa-spin mr-2"></i> Loading activities...
                                                    </div>
                                                    <div id="activitiesContent" class="space-y-2"></div>
                                                </div>
                                                <input type="hidden" id="activityIds" name="activityIds">
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">
                                                    <span data-en="Number of Guests" data-vi="Số khách">Number of Guests</span>
                                                    <span class="text-red-500">*</span>
                                                </label>
                                                <input type="number" class="form-control w-full p-3 bg-white" placeholder="2"
                                                    min="1" id="guestCount" name="guestCount" required>
                                                    
                                                <label class="block text-gray-700 font-medium mb-2 mt-4">
                                                    <span data-en="Number of Days" data-vi="Số ngày">Number of Days</span>
                                                    <span class="text-red-500">*</span>
                                                </label>
                                                <input type="number" class="form-control w-full p-3 bg-white" placeholder="3"
                                                    min="1" id="durationDays" name="durationDays" required>
                                            </div>
                                        </div>

                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">
                                                    <span data-en="Budget (USD)" data-vi="Ngân sách (USD)">Budget (USD)</span>
                                                    <span class="text-red-500">*</span>
                                                </label>
                                                <input type="number" class="form-control w-full p-3 bg-white" placeholder="500"
                                                    min="0" id="targetBudget" name="targetBudget" required>
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2"
                                                    data-en="Local Means Of Transportation"
                                                    data-vi="Phương tiện giao thông địa phương">Local Means Of Transportation</label>
                                                <div id="transportsList" class="border border-gray-200 rounded-lg p-4 max-h-48 overflow-y-auto">
                                                    <div class="text-gray-500 text-sm text-center" id="transportsLoading">
                                                        <i class="fas fa-spinner fa-spin mr-2"></i> Loading transports...
                                                    </div>
                                                    <div id="transportsContent" class="space-y-2"></div>
                                                </div>
                                                <input type="hidden" id="transportIds" name="transportIds">
                                            </div>
                                        </div>

                                        <!-- Navigation Buttons for Step 2 -->
                                        <div class="flex justify-between">
                                            <button type="button" id="back-to-step-1" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                                                <span data-en="Previous" data-vi="Quay lại">Previous</span>
                                            </button>
                                            <button type="button" id="generate-tour-btn" class="btn-search w-auto px-8 py-3 text-white font-medium rounded-lg">
                                                <span data-en="Generate Tour" data-vi="Tạo tour">Generate Tour</span>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Tour Search Results Section -->
                        <div id="tourResults" class="tour-results-container hidden mt-8">
                            <div class="flex h-screen">
                                <!-- 30% Left: Flight Section -->
                                <div class="w-1/3 pr-4">
                                    <div class="bg-white rounded-xl shadow-lg h-full">
                                        <div class="p-6 border-b">
                                            <h3 class="text-xl font-bold text-gray-800" data-en="Flight Options" data-vi="Lựa chọn chuyến bay">Flight Options</h3>
                                            <p class="text-sm text-gray-600 mt-2" data-en="Suitable flights for your tour" data-vi="Các chuyến bay phù hợp cho tour của bạn">Suitable flights for your tour</p>
                                        </div>
                                        <div class="p-6">
                                            <div class="text-center py-12">
                                                <i class="fas fa-plane-departure text-4xl text-gray-400 mb-4"></i>
                                                <h4 class="text-lg font-semibold text-gray-600 mb-2" data-en="No Suitable Flights Found" data-vi="Không tìm thấy chuyến bay phù hợp">No Suitable Flights Found</h4>
                                                <p class="text-gray-500 text-sm" data-en="Flight search feature is coming soon" data-vi="Tính năng tìm kiếm chuyến bay sắp ra mắt">Flight search feature is coming soon</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 70% Right: Tour Results -->
                                <div class="w-2/3 pl-4">
                                    <div class="bg-white rounded-xl shadow-lg h-full flex flex-col">
                                        <div class="p-6 border-b">
                                            <h3 class="text-2xl font-bold text-gray-800" data-en="Generated Tours" data-vi="Các tour đã tạo">Generated Tours</h3>
                                            <p class="text-sm text-gray-600 mt-2" data-en="Your personalized tour recommendations" data-vi="Các gợi ý tour cá nhân của bạn">Your personalized tour recommendations</p>
                                        </div>
                                        <div class="flex-1 overflow-y-auto p-6">
                                            <div id="tourResultsGrid" class="grid grid-cols-1 gap-6">
                                                <!-- Tour cards will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Loading State for Tour Search -->
                        <div id="tourLoading" class="hidden text-center py-12">
                            <div class="loading-spinner mx-auto mb-4"></div>
                            <p class="text-gray-600" data-en="Generating your personalized tour..." data-vi="Đang tạo tour cá nhân của bạn...">Generating your personalized tour...</p>
                        </div>
                    </div>

                    <!-- Hotel Tab -->
                    <div id="hotel-tab" class="tab-content">
                        <!-- AJAX Search Field với Autocomplete -->
                        <div class="mb-6">
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Search Hotels" data-vi="Tìm Khách Sạn">Search Hotels</span>
                                <span class="text-sm text-gray-500 ml-2" data-en="(Type hotel name, city or country)" data-vi="(Gõ tên khách sạn, thành phố hoặc quốc gia)"></span>
                            </label>
                            <div class="relative">
                                <input 
                                    type="text" 
                                    id="hotelSearchInput" 
                                    class="form-control w-full p-3 bg-white pr-10" 
                                    placeholder="Nhập tên khách sạn, thành phố..."
                                    data-en-placeholder="Type hotel name, city or country..."
                                    data-vi-placeholder="Nhập tên khách sạn, thành phố..."
                                    autocomplete="off"
                                >
                                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                    <i class="fas fa-search text-gray-400"></i>
                                    <div id="searchSpinner" class="hidden ml-2">
                                        <i class="fas fa-spinner fa-spin text-blue-500"></i>
                                    </div>
                                </div>
                                
                                <!-- Autocomplete Dropdown -->
                                <div id="autocompleteDropdown" class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto hidden">
                                    <div id="autocompleteResults" class="py-2">
                                        <!-- Suggestions will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <form id="hotelSearchForm">
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">
                                        <span data-en="Country" data-vi="Quốc gia">Country</span>
                                        <span class="text-gray-500 text-sm" data-en="(Optional)" data-vi="(Tùy chọn)">(Optional)</span>
                                    </label>
                                    <div class="relative">
                                        <input 
                                            type="text" 
                                            id="hotelCountryInput" 
                                            class="form-control w-full p-3 bg-white" 
                                            placeholder="Type country name..."
                                            data-en-placeholder="Type country name..."
                                            data-vi-placeholder="Gõ tên quốc gia..."
                                            name="country"
                                            autocomplete="off"
                                        >
                                        <i class="fas fa-globe absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                        
                                        <!-- Country Autocomplete Dropdown -->
                                        <div id="hotelCountryAutocomplete" class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto hidden">
                                            <div id="hotelCountryResults" class="py-2">
                                                <!-- Country suggestions will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">
                                        <span data-en="City/Province" data-vi="Thành phố/Tỉnh">City/Province</span>
                                        <span class="text-gray-500 text-sm" data-en="(Optional)" data-vi="(Tùy chọn)">(Optional)</span>
                                    </label>
                                    <div class="relative">
                                        <input 
                                            type="text" 
                                            id="hotelCityInput" 
                                            class="form-control w-full p-3 bg-white" 
                                            placeholder="Type city name..."
                                            data-en-placeholder="Type city name..."
                                            data-vi-placeholder="Gõ tên thành phố..."
                                            name="city"
                                            autocomplete="off"
                                        >
                                        <i class="fas fa-map-marker-alt absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                        
                                        <!-- City Autocomplete Dropdown -->
                                        <div id="hotelCityAutocomplete" class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto hidden">
                                            <div id="hotelCityResults" class="py-2">
                                                <!-- City suggestions will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2" data-en="Check In" data-vi="Ngày nhận phòng">Check In</label>
                                    <div class="relative">
                                        <input type="date" class="form-control w-full p-3 bg-white" name="checkin" required min="2025-06-01" style="color-scheme: light;">
                                        <i class="fas fa-calendar absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2" data-en="Check out" data-vi="Ngày trả phòng">Check out</label>
                                    <div class="relative">
                                        <input type="date" class="form-control w-full p-3 bg-white" name="checkout" required min="2025-06-01" style="color-scheme: light;">
                                        <i class="fas fa-calendar absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="flex justify-between">
                                <div class="flex-1 text-right">
                                    <button type="submit" class="btn-search px-8 py-3 text-white font-medium rounded-lg">
                                        <span data-en="Search Hotels" data-vi="Tìm Khách Sạn">Search Hotels</span>
                                    </button>
                                </div>
                                <!-- Admin Only Add Hotel Button -->
                                <div>
                                    <button type="button" id="addHotelBtn" class="admin-only bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition duration-300 flex items-center font-medium hidden" style="display: none;">
                                        <i class="fas fa-plus mr-2"></i>
                                        <span data-en="Add Hotel" data-vi="Thêm Khách Sạn">Add Hotel</span>
                                    </button>
                                </div>
                            </div>
                        </form>

                        <!-- Hotels Results Section -->
                        <div id="hotelResults" class="hotel-list-container hidden mt-8">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-2xl font-bold text-gray-800" data-en="Search Results" data-vi="Kết Quả Tìm Kiếm">Search Results</h3>
                                <div class="flex items-center space-x-4">
                                    <span id="hotelCount" class="text-gray-600"></span>
                                    <!-- Pagination Controls -->
                                    <div id="hotelPagination" class="pagination-controls hidden">
                                        <button id="prevHotelPage" class="pagination-btn" disabled>
                                            <i class="fas fa-chevron-left"></i>
                                        </button>
                                        <span id="hotelPageInfo" class="pagination-info">1 / 1</span>
                                        <button id="nextHotelPage" class="pagination-btn" disabled>
                                            <i class="fas fa-chevron-right"></i>
                                        </button>
                                    </div>
                                    <button id="minimizeHotelResults" class="minimize-btn bg-gray-100 hover:bg-gray-200 p-2 rounded-lg transition-colors duration-200">
                                        <i class="fas fa-minus text-gray-600"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div id="hotelList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <!-- Hotel items will be populated here -->
                            </div>
                        </div>

                        <!-- Loading State -->
                        <div id="hotelLoading" class="hidden text-center py-12">
                            <div class="loading-spinner mx-auto mb-4"></div>
                            <p class="text-gray-600" data-en="Searching for hotels..." data-vi="Đang tìm kiếm khách sạn...">Searching for hotels...</p>
                        </div>

                        <!-- No Results State -->
                        <div id="hotelNoResults" class="hidden text-center py-12">
                            <i class="fas fa-hotel text-6xl text-gray-300 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-600 mb-2" data-en="No Hotels Found" data-vi="Không Tìm Thấy Khách Sạn">No Hotels Found</h3>
                            <p class="text-gray-500" data-en="Try adjusting your search criteria" data-vi="Thử điều chỉnh tiêu chí tìm kiếm">Try adjusting your search criteria</p>
                        </div>
                    </div>

                    <!-- Airlines Tab -->
                    <div id="airline-tab" class="tab-content hidden">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2" data-en="Departure"
                                    data-vi="Điểm khởi hành">Departure</label>
                                <div class="relative">
                                    <select class="form-control w-full p-3 bg-white appearance-none"
                                        name="airlineDeparture">
                                        <option data-en="Select Province" data-vi="Chọn tỉnh thành">Select Province</option>
                                        <option data-en="Other province" data-vi="Tỉnh thành khác">Other province</option>
                                        <option data-en="Ha Noi" data-vi="Hà Nội">Ha Noi</option>
                                        <option data-en="Ho Chi Minh" data-vi="Hồ Chí Minh">Ho Chi Minh</option>
                                        <option data-en="Da Nang" data-vi="Đà Nẵng">Da Nang</option>
                                        <option data-en="Phu Quoc" data-vi="Phú Quốc">Phu Quoc</option>
                                        <option data-en="Nha Trang" data-vi="Nha Trang">Nha Trang</option>
                                    </select>
                                    <i
                                        class="fas fa-chevron-down absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2" data-en="Destination"
                                    data-vi="Điểm đến">Destination</label>
                                <div class="relative">
                                    <select class="form-control w-full p-3 bg-white appearance-none"
                                        name="airlineDestination">
                                        <option data-en="Select Province" data-vi="Chọn tỉnh thành">Select Province</option>
                                        <option data-en="Other province" data-vi="Tỉnh thành khác">Other province</option>
                                        <option data-en="Ha Noi" data-vi="Hà Nội">Ha Noi</option>
                                        <option data-en="Ho Chi Minh" data-vi="Hồ Chí Minh">Ho Chi Minh</option>
                                        <option data-en="Da Nang" data-vi="Đà Nẵng">Da Nang</option>
                                        <option data-en="Phu Quoc" data-vi="Phú Quốc">Phu Quoc</option>
                                        <option data-en="Nha Trang" data-vi="Nha Trang">Nha Trang</option>
                                    </select>
                                    <i
                                        class="fas fa-chevron-down absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2" data-en="Departure Time"
                                    data-vi="Giờ khởi hành">Departure Time</label>
                                <div class="relative">
                                    <input type="time" class="form-control w-full p-3 bg-white" name="airlineTime"
                                        style="color-scheme: light;">
                                    <i
                                        class="fas fa-clock absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                                </div>
                            </div>
                            <div class="flex flex-col">
                                <label class="block text-gray-700 font-medium mb-2" data-en="Departure Day"
                                    data-vi="Ngày khởi hành">Departure Day</label>
                                <div class="relative mb-auto">
                                    <input type="date" class="form-control w-full p-3 bg-white" name="airlineDate"
                                        min="2025-07-01" style="color-scheme: light;">
                                    <i
                                        class="fas fa-calendar absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                                </div>
                                <button class="btn-search px-8 py-3 text-white font-medium rounded-lg mt-4">
                                    <span data-en="Search" data-vi="Tìm kiếm">Search</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Package Tour Tab -->
                    <div id="package-tab" class="tab-content hidden">
                        <div class="text-center py-12">
                            <i class="fas fa-suitcase-rolling text-6xl text-gray-300 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-600 mb-2" data-en="Package Tours Coming Soon"
                                data-vi="Tour Trọn Gói Sắp Ra Mắt">Package Tours Coming Soon</h3>
                            <p class="text-gray-500" data-en="We're working on amazing package deals for you!"
                                data-vi="Chúng tôi đang chuẩn bị những gói tour tuyệt vời cho bạn!">We're working on amazing
                                package deals for you!</p>
                        </div>
                    </div>

                    <!-- Restaurant Tab -->
                    <div id="restaurant-tab" class="tab-content hidden">
                        <!-- AJAX Search Field với Autocomplete -->
                        <div class="mb-6">
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Search Restaurants" data-vi="Tìm Nhà Hàng">Search Restaurants</span>
                                <span class="text-sm text-gray-500 ml-2" data-en="(Type restaurant name, city or country)" data-vi="(Gõ tên nhà hàng, thành phố hoặc quốc gia)"></span>
                            </label>
                            <div class="relative">
                                <input 
                                    type="text" 
                                    id="restaurantSearchInput" 
                                    class="form-control w-full p-3 bg-white pr-10" 
                                    placeholder="Nhập tên nhà hàng, thành phố..."
                                    data-en-placeholder="Type restaurant name, city or country..."
                                    data-vi-placeholder="Nhập tên nhà hàng, thành phố..."
                                    autocomplete="off"
                                >
                                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                    <i class="fas fa-search text-gray-400"></i>
                                    <div id="restaurantSearchSpinner" class="hidden ml-2">
                                        <i class="fas fa-spinner fa-spin text-blue-500"></i>
                                    </div>
                                </div>
                                
                                <!-- Autocomplete Dropdown -->
                                <div id="restaurantAutocompleteDropdown" class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto hidden">
                                    <div id="restaurantAutocompleteResults" class="py-2">
                                        <!-- Suggestions will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <form id="restaurantSearchForm">
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">
                                        <span data-en="Country" data-vi="Quốc gia">Country</span>
                                        <span class="text-gray-500 text-sm" data-en="(Optional)" data-vi="(Tùy chọn)">(Optional)</span>
                                    </label>
                                    <div class="relative">
                                        <input 
                                            type="text" 
                                            id="restaurantCountryInput" 
                                            class="form-control w-full p-3 bg-white" 
                                            placeholder="Type country name..."
                                            data-en-placeholder="Type country name..."
                                            data-vi-placeholder="Gõ tên quốc gia..."
                                            name="country"
                                            autocomplete="off"
                                        >
                                        <i class="fas fa-globe absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                        
                                        <!-- Country Autocomplete Dropdown -->
                                        <div id="restaurantCountryAutocomplete" class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto hidden">
                                            <div id="restaurantCountryResults" class="py-2">
                                                <!-- Country suggestions will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">
                                        <span data-en="City/Province" data-vi="Thành phố/Tỉnh">City/Province</span>
                                        <span class="text-gray-500 text-sm" data-en="(Optional)" data-vi="(Tùy chọn)">(Optional)</span>
                                    </label>
                                    <div class="relative">
                                        <input 
                                            type="text" 
                                            id="restaurantCityInput" 
                                            class="form-control w-full p-3 bg-white" 
                                            placeholder="Type city name..."
                                            data-en-placeholder="Type city name..."
                                            data-vi-placeholder="Gõ tên thành phố..."
                                            name="city"
                                            autocomplete="off"
                                        >
                                        <i class="fas fa-map-marker-alt absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                        
                                        <!-- City Autocomplete Dropdown -->
                                        <div id="restaurantCityAutocomplete" class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto hidden">
                                            <div id="restaurantCityResults" class="py-2">
                                                <!-- City suggestions will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">
                                        <span data-en="Cuisine Type" data-vi="Loại Ẩm Thực">Cuisine Type</span>
                                        <span class="text-gray-500 text-sm" data-en="(Optional)" data-vi="(Tùy chọn)">(Optional)</span>
                                    </label>
                                    <div class="relative">
                                        <select id="restaurantCuisineSelect" class="form-control w-full p-3 bg-white appearance-none" name="cuisine_type">
                                            <option value="" data-en="All Cuisines" data-vi="Tất cả ẩm thực">All Cuisines</option>
                                            <!-- Cuisine options will be loaded from API -->
                                        </select>
                                        <i class="fas fa-chevron-down absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                    </div>
                                </div>
                                <div class="flex flex-col">
                                    <div class="mb-auto"></div> <!-- Spacer để align button xuống dưới -->
                                    <div class="flex gap-3 mt-auto">
                                        <button type="submit" class="btn-search px-8 py-3 text-white font-medium rounded-lg flex-1">
                                            <span data-en="Search Restaurants" data-vi="Tìm Nhà Hàng">Search Restaurants</span>
                                        </button>
                                        <!-- Admin Only Add Restaurant Button -->
                                        <button type="button" id="addRestaurantBtn" class="admin-only bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition duration-300 flex items-center font-medium hidden" style="display: none;">
                                            <i class="fas fa-plus mr-2"></i>
                                            <span data-en="Add Restaurant" data-vi="Thêm Nhà Hàng">Add Restaurant</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <!-- Restaurants Results Section -->
                        <div id="restaurantResults" class="restaurant-list-container hidden mt-8">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-2xl font-bold text-gray-800" data-en="Search Results" data-vi="Kết Quả Tìm Kiếm">Search Results</h3>
                                <div class="flex items-center space-x-4">
                                    <span id="restaurantCount" class="text-gray-600"></span>
                                    <!-- Pagination Controls -->
                                    <div id="restaurantPagination" class="pagination-controls hidden">
                                        <button id="prevRestaurantPage" class="pagination-btn" disabled>
                                            <i class="fas fa-chevron-left"></i>
                                        </button>
                                        <span id="restaurantPageInfo" class="pagination-info">1 / 1</span>
                                        <button id="nextRestaurantPage" class="pagination-btn" disabled>
                                            <i class="fas fa-chevron-right"></i>
                                        </button>
                                    </div>
                                    <button id="minimizeRestaurantResults" class="minimize-btn bg-gray-100 hover:bg-gray-200 p-2 rounded-lg transition-colors duration-200">
                                        <i class="fas fa-minus text-gray-600"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Restaurant Results Wrapper with detail view -->
                            <div id="restaurantResultsWrapper" class="restaurant-results-wrapper">
                                <!-- Restaurant List (left side when detail is shown) -->
                                <div id="restaurantList" class="restaurant-list grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    <!-- Restaurant items will be populated here -->
                                </div>
                                
                                <!-- Restaurant Detail Panel (right side) -->
                                <div id="restaurantDetailPanel" class="restaurant-detail-panel" style="display: none;">
                                    <!-- Detail Header Enhanced -->
                                    <div class="detail-header-enhanced">
                                        <div class="header-background"></div>
                                        <div class="header-content">
                                            <button id="closeDetailBtn" class="close-btn-enhanced">
                                                <i class="fas fa-times"></i>
                                            </button>
                                            <div class="header-text">
                                                <h2 class="header-title" data-en="Restaurant Details" data-vi="Chi Tiết Nhà Hàng">Restaurant Details</h2>
                                                <p class="header-subtitle" data-en="Detailed information & description" data-vi="Thông tin chi tiết & mô tả">Detailed information & description</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Detail Content Enhanced -->
                                    <div class="detail-content-enhanced">
                                        <!-- Restaurant Info Cards -->
                                        <div id="restaurantDetailContent" class="restaurant-detail-cards">
                                            <!-- Restaurant details will be populated here -->
                                        </div>
                                        
                                        <!-- Description Section Enhanced -->
                                        <div class="description-section-enhanced">
                                            <div class="description-header">
                                                <div class="description-icon">
                                                    <i class="fas fa-align-left"></i>
                                                </div>
                                                <h3 class="description-title" data-en="About This Restaurant" data-vi="Về Nhà Hàng Này">About This Restaurant</h3>
                                            </div>
                                            <div id="restaurantDescription" class="description-content">
                                                <!-- Description will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Loading State -->
                        <div id="restaurantLoading" class="hidden text-center py-12">
                            <div class="loading-spinner mx-auto mb-4"></div>
                            <p class="text-gray-600" data-en="Searching for restaurants..." data-vi="Đang tìm kiếm nhà hàng...">Searching for restaurants...</p>
                        </div>

                        <!-- No Results State -->
                        <div id="restaurantNoResults" class="hidden text-center py-12">
                            <i class="fas fa-utensils text-6xl text-gray-300 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-600 mb-2" data-en="No Restaurants Found" data-vi="Không Tìm Thấy Nhà Hàng">No Restaurants Found</h3>
                            <p class="text-gray-500" data-en="Try adjusting your search criteria" data-vi="Thử điều chỉnh tiêu chí tìm kiếm">Try adjusting your search criteria</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Search History Section -->
            <div class="glass-card rounded-2xl p-8">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h3 class="text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent"
                            data-en="Tour Search History" data-vi="Lịch Sử Tìm Kiếm Tour">Tour Search History</h3>
                        <p class="text-gray-500 mt-1" data-en="Your recent travel searches and bookings"
                            data-vi="Các tìm kiếm và đặt chỗ du lịch gần đây">Your recent travel searches and bookings</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button id="prevPageBtn" 
                            class="bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition duration-300 text-sm font-medium flex items-center"
                            data-en="Previous" data-vi="Trước">
                            <i class="fas fa-chevron-left mr-1"></i>
                            <span>Previous</span>
                        </button>
                        <button id="nextPageBtn"
                            class="bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition duration-300 text-sm font-medium flex items-center"
                            data-en="Next" data-vi="Tiếp">
                            <span>Next</span>
                            <i class="fas fa-chevron-right ml-1"></i>
                        </button>
                        <button id="viewAllHistoryBtn"
                            class="bg-blue-500 text-white px-6 py-2 rounded-xl hover:bg-blue-600 transition duration-300 text-sm font-medium flex items-center"
                            data-en="View All" data-vi="Xem Tất Cả">
                            <span>View All</span>
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>

                <!-- History Loading State -->
                <div id="historyLoading" class="text-center py-12 hidden">
                    <div class="loading-spinner mx-auto mb-4"></div>
                    <p class="text-gray-600" data-en="Loading tour history..." data-vi="Đang tải lịch sử tour...">Loading tour history...</p>
                </div>

                <!-- History Content -->
                <div id="historyContent" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- History items will be populated here -->
                </div>

                <!-- No History State -->
                <div id="noHistoryState" class="text-center py-12 hidden">
                    <i class="fas fa-history text-6xl text-gray-300 mb-4"></i>
                    <h3 class="text-xl font-semibold text-gray-600 mb-2" data-en="No Tour History Yet" data-vi="Chưa Có Lịch Sử Tour">No Tour History Yet</h3>
                    <p class="text-gray-500" data-en="Start planning your first trip!" data-vi="Hãy bắt đầu lên kế hoạch cho chuyến đi đầu tiên!">Start planning your first trip!</p>
                </div>
            </div>

            <!-- Tour History Detail Modal -->
            <div id="tourHistoryDetailModal" class="tour-detail-modal" style="display: none;">
                <div class="modal-backdrop" onclick="closeTourDetailModal()"></div>
                <div class="modal-content-split">
                    <!-- Modal Header -->
                    <div class="modal-header-split">
                        <div class="header-content">
                            <div class="header-icon">
                                <i class="fas fa-route"></i>
                            </div>
                            <div class="header-text">
                                <h2 class="header-title" data-en="Tour Details" data-vi="Chi Tiết Tour">Tour Details</h2>
                                <p class="header-subtitle" data-en="Complete journey information" data-vi="Thông tin hành trình đầy đủ">Complete journey information</p>
                            </div>
                        </div>
                        <button class="close-btn" onclick="closeTourDetailModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <!-- Modal Body Split Layout -->
                    <div class="modal-body-split">
                        <!-- Left Side - Images (40%) -->
                        <div class="tour-images-section">
                            <div id="tourImagesContent" class="tour-images-container">
                                <!-- Tour images will be populated here -->
                            </div>
                        </div>
                        
                        <!-- Right Side - Details (60%) -->
                        <div class="tour-details-section">
                            <div class="h-full flex flex-col">
                                <!-- Tab Navigation -->
                                <div class="flex border-b sticky top-0 bg-white z-10">
                                    <button id="scheduleTabBtn" class="flex-1 py-4 px-6 font-medium text-center text-gray-500 hover:bg-gray-50 border-b-2 border-blue-500 text-blue-600 bg-blue-50">
                                        <i class="fas fa-calendar-alt mr-2"></i>
                                        <span data-en="Schedule" data-vi="Lịch trình">Schedule</span>
                                    </button>
                                    <button id="costTabBtn" class="flex-1 py-4 px-6 font-medium text-center text-gray-500 hover:bg-gray-50">
                                        <i class="fas fa-chart-pie mr-2"></i>
                                        <span data-en="Overall Estimated Cost" data-vi="Chi phí ước tính tổng thể">Overall Estimated Cost</span>
                                    </button>
                                </div>
                                
                                <!-- Tab Content -->
                                <div class="p-6 overflow-auto flex-grow">
                                    <!-- Schedule Tab (visible by default) -->
                                    <div id="scheduleTabContent" class="schedule-content">
                                        <div id="tourScheduleContent">
                                            <!-- Schedule content will be populated here -->
                                            <div class="space-y-6">
                                                <!-- Placeholder for days content -->
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Cost Tab (hidden by default) -->
                                    <div id="costTabContent" class="cost-content hidden">
                                        <div id="tourCostContent">
                                            <!-- Cost content will be populated here -->
                                            <div class="space-y-6">
                                                <!-- Enhanced Total Estimated Cost Display -->
                                                <div class="estimated-cost-container">
                                                    <div class="estimated-cost-header">
                                                        <div class="estimated-cost-title">
                                                            <i class="fas fa-receipt mr-2"></i>
                                                            <span data-en="Total Estimated Cost" data-vi="Tổng Chi Phí Ước Tính">Total Estimated Cost</span>
                                                        </div>
                                                        <div class="estimated-cost-currency"></div>
                                                    </div>
                                                    <div class="estimated-cost-value">0</div>
                                                    <div class="estimated-cost-details">
                                                        <div class="tour-option-id"></div>
                                                    </div>
                                                </div>
                                                
                                                <!-- Budget Overview -->
                                                <div class="budget-comparison">
                                                    <div class="budget-info">
                                                        <div>
                                                            <i class="fas fa-bullseye text-blue-500 mr-2"></i>
                                                            <span data-en="Target Budget" data-vi="Ngân sách mục tiêu">Target Budget:</span>
                                                        </div>
                                                        <div class="font-semibold" id="targetBudget">0</div>
                                                    </div>
                                                    
                                                    <div class="budget-info">
                                                        <div>
                                                            <i class="fas fa-calculator text-purple-500 mr-2"></i>
                                                            <span data-en="Estimated Cost" data-vi="Chi phí ước tính">Estimated Cost:</span>
                                                        </div>
                                                        <div class="font-semibold" id="estimatedCost">0</div>
                                                    </div>
                                                    
                                                    <div class="budget-info">
                                                        <div>
                                                            <i class="fas fa-piggy-bank text-green-500 mr-2" id="remainingBudgetIcon"></i>
                                                            <span data-en="Remaining Budget" data-vi="Ngân sách còn lại" id="remainingBudgetLabel">Remaining Budget:</span>
                                                        </div>
                                                        <div class="font-semibold text-green-600" id="remainingBudget">0</div>
                                                    </div>
                                                    
                                                    <div class="mt-4 budget-progress-container">
                                                        <div class="budget-progress-bar">
                                                            <div class="budget-progress bg-green-500" id="budgetProgress" style="width: 0%"></div>
                                                        </div>
                                                        <div class="budget-labels">
                                                            <div class="budget-spent" id="budgetPercentUsed">0% Used</div>
                                                            <div class="budget-remaining" id="budgetPercentAvailable">100% Available</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <!-- Cost Breakdown -->
                                                <div class="cost-breakdown">
                                                    <h3 class="text-lg font-semibold mb-4">
                                                        <i class="fas fa-chart-pie text-blue-500 mr-2"></i>
                                                        <span data-en="Cost Breakdown" data-vi="Phân tích chi phí">Cost Breakdown</span>
                                                    </h3>
                                                    
                                                    <div class="space-y-4" id="costBreakdown">
                                                        <!-- Cost breakdown content will be populated here -->
                                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                            <!-- Cost categories will be displayed here -->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modal Footer -->
                    <div class="modal-footer-split">
                        <button class="btn-secondary" onclick="closeTourDetailModal()" data-en="Close" data-vi="Đóng">Close</button>
                        <button id="searchAgainBtn" class="btn-primary" data-en="Search Again" data-vi="Tìm Lại">Search Again</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Hotel Information Panel (Center Modal) -->
        <div id="hotelInfoPanel" class="info-panel-modal" style="display: none;">
            <div class="info-panel-backdrop" onclick="closeHotelInfoPanel()"></div>
            <div class="info-panel-content">
                <div class="info-panel-header">
                    <h2 class="info-panel-title" data-en="Hotel Information" data-vi="Thông Tin Khách Sạn">Hotel Information</h2>
                    <button class="info-panel-close" onclick="closeHotelInfoPanel()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="info-panel-body">
                    <div id="hotelInfoContent">
                        <!-- Hotel details will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Restaurant Information Panel (Center Modal) -->
        <div id="restaurantInfoPanel" class="info-panel-modal" style="display: none;">
            <div class="info-panel-backdrop" onclick="closeRestaurantInfoPanel()"></div>
            <div class="info-panel-content">
                <div class="info-panel-header">
                    <h2 class="info-panel-title" data-en="Restaurant Information" data-vi="Thông Tin Nhà Hàng">Restaurant Information</h2>
                    <button class="info-panel-close" onclick="closeRestaurantInfoPanel()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="info-panel-body">
                    <div id="restaurantInfoContent">
                        <!-- Restaurant details will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Restaurant Modal -->
        <div id="editRestaurantModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800" data-en="Edit Restaurant" data-vi="Chỉnh Sửa Nhà Hàng">Edit Restaurant</h2>
                        <p class="text-gray-600 mt-1" data-en="Update restaurant information" data-vi="Cập nhật thông tin nhà hàng">Update restaurant information</p>
                    </div>
                    <button id="closeEditRestaurantModal" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <!-- Edit Form -->
                <form id="editRestaurantForm" class="space-y-6">
                    <input type="hidden" id="edit_restaurant_id" name="restaurant_id">
                    
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">
                            <span data-en="Restaurant Name" data-vi="Tên Nhà Hàng">Restaurant Name</span>
                            <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="edit_name" name="name" class="form-control w-full p-3 bg-white" placeholder="Restaurant Name" maxlength="200" required>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="City ID" data-vi="Mã Thành Phố">City ID</span>
                                <span class="text-red-500">*</span>
                            </label>
                            <input type="number" id="edit_city_id" name="city_id" class="form-control w-full p-3 bg-white" placeholder="1" required>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="City" data-vi="Thành Phố">City</span>
                                <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="edit_city" name="city" class="form-control w-full p-3 bg-white" placeholder="City" maxlength="100" required>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Country" data-vi="Quốc Gia">Country</span>
                                <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="edit_country" name="country" class="form-control w-full p-3 bg-white" placeholder="Country" maxlength="100" required>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Average Price" data-vi="Giá Trung Bình">Average Price</span>
                            </label>
                            <input type="number" id="edit_price_avg" name="price_avg" class="form-control w-full p-3 bg-white" placeholder="150000" step="0.01">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Cuisine Type" data-vi="Loại Ẩm Thực">Cuisine Type</span>
                            </label>
                            <input type="text" id="edit_cuisine_type" name="cuisine_type" class="form-control w-full p-3 bg-white" placeholder="Cuisine Type" maxlength="100">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Rating" data-vi="Đánh Giá">Rating</span>
                            </label>
                            <input type="number" id="edit_rating" name="rating" class="form-control w-full p-3 bg-white" placeholder="4.5" step="0.01" min="0" max="5">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Latitude" data-vi="Vĩ Độ">Latitude</span>
                            </label>
                            <input type="number" id="edit_latitude" name="latitude" class="form-control w-full p-3 bg-white" placeholder="21.0285" step="0.00000001">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Longitude" data-vi="Kinh Độ">Longitude</span>
                            </label>
                            <input type="number" id="edit_longitude" name="longitude" class="form-control w-full p-3 bg-white" placeholder="105.8542" step="0.00000001">
                        </div>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-medium mb-2">
                            <span data-en="Description" data-vi="Mô Tả">Description</span>
                        </label>
                        <textarea id="edit_description" name="description" class="form-control w-full p-3 bg-white" rows="3" placeholder="Description..."></textarea>
                    </div>

                    <!-- Form Actions -->
                    <div class="flex justify-end pt-6 border-t">
                        <button type="button" id="cancelEditBtn" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors mr-3">
                            <span data-en="Cancel" data-vi="Hủy">Cancel</span>
                        </button>
                        <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                            <i class="fas fa-save mr-2"></i>
                            <span data-en="Save Changes" data-vi="Lưu Thay Đổi">Save Changes</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Edit Hotel Modal -->
        <div id="editHotelModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800" data-en="Edit Hotel" data-vi="Chỉnh Sửa Khách Sạn">Edit Hotel</h2>
                        <p class="text-gray-600 mt-1" data-en="Update hotel information" data-vi="Cập nhật thông tin khách sạn">Update hotel information</p>
                    </div>
                    <button id="closeEditHotelModal" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <!-- Edit Form -->
                <form id="editHotelForm" class="space-y-6">
                    <input type="hidden" id="edit_hotel_id" name="hotel_id">
                    
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">
                            <span data-en="Hotel Name" data-vi="Tên Khách Sạn">Hotel Name</span>
                            <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="edit_hotel_name" name="name" class="form-control w-full p-3 bg-white" placeholder="Hotel Name" maxlength="200" required>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="City ID" data-vi="Mã Thành Phố">City ID</span>
                                <span class="text-red-500">*</span>
                            </label>
                            <input type="number" id="edit_hotel_city_id" name="city_id" class="form-control w-full p-3 bg-white" placeholder="1" required>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="City" data-vi="Thành Phố">City</span>
                                <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="edit_hotel_city" name="city" class="form-control w-full p-3 bg-white" placeholder="City" maxlength="100" required>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Country" data-vi="Quốc Gia">Country</span>
                                <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="edit_hotel_country" name="country" class="form-control w-full p-3 bg-white" placeholder="Country" maxlength="100" required>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Stars" data-vi="Số sao">Stars</span>
                            </label>
                            <input type="number" id="edit_hotel_stars" name="stars" class="form-control w-full p-3 bg-white" placeholder="4" step="1" min="1" max="5">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Price Per Night" data-vi="Giá Một Đêm">Price Per Night</span>
                            </label>
                            <input type="number" id="edit_hotel_price_per_night" name="price_per_night" class="form-control w-full p-3 bg-white" placeholder="150.00" step="0.01">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Rating" data-vi="Đánh Giá">Rating</span>
                            </label>
                            <input type="number" id="edit_hotel_rating" name="rating" class="form-control w-full p-3 bg-white" placeholder="7.5" step="0.1" min="0" max="10">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Latitude" data-vi="Vĩ Độ">Latitude</span>
                            </label>
                            <input type="number" id="edit_hotel_latitude" name="latitude" class="form-control w-full p-3 bg-white" placeholder="21.0285" step="0.00000001">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Longitude" data-vi="Kinh Độ">Longitude</span>
                            </label>
                            <input type="number" id="edit_hotel_longitude" name="longitude" class="form-control w-full p-3 bg-white" placeholder="105.8542" step="0.00000001">
                        </div>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-medium mb-2">
                            <span data-en="Description" data-vi="Mô Tả">Description</span>
                        </label>
                        <textarea id="edit_hotel_description" name="description" class="form-control w-full p-3 bg-white" rows="3" placeholder="Description..."></textarea>
                    </div>

                    <!-- Form Actions -->
                    <div class="flex justify-end pt-6 border-t">
                        <button type="button" id="cancelEditHotelBtn" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors mr-3">
                            <span data-en="Cancel" data-vi="Hủy">Cancel</span>
                        </button>
                        <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                            <i class="fas fa-save mr-2"></i>
                            <span data-en="Save Changes" data-vi="Lưu Thay Đổi">Save Changes</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="deleteConfirmModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-exclamation-triangle text-2xl text-red-500"></i>
                    </div>
                    <h2 class="text-xl font-bold text-gray-800 mb-2" data-en="Confirm Delete" data-vi="Xác Nhận Xóa">Confirm Delete</h2>
                    <p id="deleteConfirmMessage" class="text-gray-600" data-en="Are you sure you want to delete this restaurant? This action cannot be undone." data-vi="Bạn có chắc chắn muốn xóa nhà hàng này? Hành động này không thể hoàn tác.">
                        Are you sure you want to delete this restaurant? This action cannot be undone.
                    </p>
                </div>
                
                <div class="flex justify-center space-x-4">
                    <button id="cancelDeleteBtn" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                        <span data-en="Cancel" data-vi="Hủy">Cancel</span>
                    </button>
                    <button id="confirmDeleteBtn" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                        <i class="fas fa-trash-alt mr-2"></i>
                        <span data-en="Delete" data-vi="Xóa">Delete</span>
                    </button>
                </div>
                <input type="hidden" id="deleteItemType" value="">
                <input type="hidden" id="deleteItemId" value="">
            </div>
        </div>

        <!-- Add Restaurant Modal -->
        <div id="addRestaurantModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800" data-en="Add New Restaurant" data-vi="Thêm Nhà Hàng Mới">Add New Restaurant</h2>
                        <p class="text-gray-600 mt-1" data-en="Choose how you want to add restaurant data" data-vi="Chọn cách bạn muốn thêm dữ liệu nhà hàng">Choose how you want to add restaurant data</p>
                    </div>
                    <button id="closeAddRestaurantModal" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <!-- Modal Content - Choice Options -->
                <div id="addRestaurantChoice" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Manual Add Option -->
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border-2 border-transparent hover:border-blue-300 transition-all cursor-pointer" id="manualAddOption">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-edit text-white text-2xl"></i>
                                </div>
                                <h3 class="text-lg font-semibold text-gray-800 mb-2" data-en="Manual Entry" data-vi="Nhập Thủ Công">Manual Entry</h3>
                                <p class="text-gray-600 text-sm" data-en="Fill out the restaurant information form manually" data-vi="Điền thông tin nhà hàng bằng form thủ công">Fill out the restaurant information form manually</p>
                            </div>
                        </div>

                        <!-- Excel Upload Option -->
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border-2 border-transparent hover:border-green-300 transition-all cursor-pointer" id="excelUploadOption">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-file-excel text-white text-2xl"></i>
                                </div>
                                <h3 class="text-lg font-semibold text-gray-800 mb-2" data-en="Excel Upload" data-vi="Upload Excel">Excel Upload</h3>
                                <p class="text-gray-600 text-sm" data-en="Upload an Excel file with restaurant data" data-vi="Upload file Excel với dữ liệu nhà hàng">Upload an Excel file with restaurant data</p>
                            </div>
                        </div>
                    </div>

                    <!-- Excel Format Info -->
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6">
                        <div class="flex items-start">
                            <i class="fas fa-info-circle text-yellow-600 mt-1 mr-3"></i>
                            <div>
                                <h4 class="font-semibold text-yellow-800 mb-2" data-en="Excel File Requirements" data-vi="Yêu Cầu File Excel">Excel File Requirements</h4>
                                <p class="text-yellow-700 text-sm mb-2" data-en="Your Excel file must have these columns:" data-vi="File Excel của bạn phải có các cột sau:">Your Excel file must have these columns:</p>
                                <div class="text-xs font-mono bg-yellow-100 p-2 rounded text-yellow-800">
                                    name | city | country | price_avg | cuisine_type | rating | description
                                </div>
                                <p class="text-yellow-700 text-sm mt-2" data-en="Restaurant ID will be auto-generated. City ID, latitude, and longitude will be filled automatically." data-vi="Mã nhà hàng sẽ được tạo tự động. City ID, vĩ độ và kinh độ sẽ được điền tự động.">Restaurant ID will be auto-generated. City ID, latitude, and longitude will be filled automatically.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Manual Form Container (Hidden by default) -->
                <div id="manualFormContainer" class="hidden">
                    <form id="addRestaurantForm" class="space-y-6">
                        <!-- Restaurant ID is now auto-generated -->
                        <div class="grid grid-cols-1 md:grid-cols-1 gap-6">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Restaurant Name" data-vi="Tên Nhà Hàng">Restaurant Name</span>
                                    <span class="text-red-500">*</span>
                                </label>
                                <input type="text" name="name" class="form-control w-full p-3 bg-white" placeholder="Phở Hà Nội" maxlength="200" required>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="hidden">
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="City ID" data-vi="Mã Thành Phố">City ID</span>
                                </label>
                                <input type="number" name="city_id" id="restaurant_city_id" class="form-control w-full p-3 bg-white" placeholder="1">
                                <!-- Thêm hidden input để đảm bảo city_id được submit mà không bắt buộc người dùng nhập -->
                                <input type="hidden" name="city_id_fallback" id="restaurant_city_id_fallback" value="0">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Country" data-vi="Quốc Gia">Country</span>
                                    <span class="text-red-500">*</span>
                                </label>
                                <div class="relative">
                                    <input 
                                        type="text" 
                                        name="country" 
                                        id="restaurant_country" 
                                        class="form-control w-full p-3 bg-white" 
                                        placeholder="Vietnam" 
                                        maxlength="100" 
                                        required
                                        autocomplete="off">
                                    <input type="text" id="country_ghost" class="absolute top-0 left-0 w-full p-3 text-gray-300 bg-transparent pointer-events-none" readonly>
                                    <div id="countryAutocomplete" class="absolute bg-white shadow-lg rounded-lg mt-1 w-full z-10 hidden"></div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="City" data-vi="Thành Phố">City</span>
                                    <span class="text-red-500">*</span>
                                </label>
                                <div class="relative">
                                    <input 
                                        type="text" 
                                        name="city" 
                                        id="restaurant_city" 
                                        class="form-control w-full p-3 bg-white" 
                                        placeholder="Hà Nội" 
                                        maxlength="100" 
                                        required
                                        autocomplete="off">
                                    <input type="text" id="city_ghost" class="absolute top-0 left-0 w-full p-3 text-gray-300 bg-transparent pointer-events-none" readonly>
                                    <div id="cityAutocomplete" class="absolute bg-white shadow-lg rounded-lg mt-1 w-full z-10 hidden"></div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Average Price" data-vi="Giá Trung Bình">Average Price</span>
                                </label>
                                <input type="number" name="price_avg" class="form-control w-full p-3 bg-white" placeholder="150000" step="0.01">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Cuisine Type" data-vi="Loại Ẩm Thực">Cuisine Type</span>
                                </label>
                                <div class="relative">
                                    <input type="text" id="cuisine_type_input" name="cuisine_type" class="form-control w-full p-3 bg-white" placeholder="Vietnamese" maxlength="100" autocomplete="off">
                                    <input type="text" id="cuisine_type_ghost" class="absolute top-0 left-0 w-full p-3 text-gray-300 bg-transparent pointer-events-none" readonly>
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Rating" data-vi="Đánh Giá">Rating</span>
                                </label>
                                <input type="number" name="rating" class="form-control w-full p-3 bg-white" placeholder="4.5" step="0.01" min="0" max="5">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 gap-6">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Address Search" data-vi="Tìm Kiếm Địa Chỉ">Address Search</span>
                                </label>
                                <div class="flex space-x-2">
                                    <div class="relative flex-grow">
                                        <input 
                                            type="text" 
                                            id="restaurant_address_search" 
                                            class="form-control w-full p-3 bg-white pr-10" 
                                            placeholder="Enter full address..." 
                                            data-en-placeholder="Enter full address..." 
                                            data-vi-placeholder="Nhập địa chỉ đầy đủ...">
                                        <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                            <i class="fas fa-map-marker-alt text-gray-400"></i>
                                        </div>
                                    </div>
                                    <button 
                                        type="button" 
                                        id="geocodeAddressBtn" 
                                        class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded transition-colors">
                                        <i class="fas fa-search mr-1"></i>
                                        <span data-en="Search" data-vi="Tìm">Search</span>
                                    </button>
                                </div>
                                <div id="map" class="w-full h-40 bg-gray-100 rounded-lg mt-3"></div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Latitude" data-vi="Vĩ Độ">Latitude</span>
                                </label>
                                <div class="relative">
                                    <input type="number" id="restaurant_latitude" name="latitude" class="form-control w-full p-3 bg-white" placeholder="21.0285" step="0.00000001">
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                        <div id="manualCoordToggle" class="text-blue-500 hover:text-blue-700 cursor-pointer" title="Chỉnh sửa thủ công">
                                            <i class="fas fa-pencil-alt"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Longitude" data-vi="Kinh Độ">Longitude</span>
                                </label>
                                <input type="number" id="restaurant_longitude" name="longitude" class="form-control w-full p-3 bg-white" placeholder="105.8542" step="0.00000001">
                            </div>
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Description" data-vi="Mô Tả">Description</span>
                            </label>
                            <textarea name="description" class="form-control w-full p-3 bg-white" rows="3" placeholder="Delicious Vietnamese restaurant..."></textarea>
                        </div>

                        <!-- Form Actions -->
                        <div class="flex justify-between pt-6 border-t">
                            <button type="button" id="backToChoice" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                <i class="fas fa-arrow-left mr-2"></i>
                                <span data-en="Back" data-vi="Quay Lại">Back</span>
                            </button>
                            <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                                <i class="fas fa-save mr-2"></i>
                                <span data-en="Add Restaurant" data-vi="Thêm Nhà Hàng">Add Restaurant</span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Excel Upload Container (Hidden by default) -->
                <div id="excelUploadContainer" class="hidden">
                    <div class="text-center">
                        <!-- Excel Guidance -->
                        <div class="mb-6 p-4 bg-blue-50 rounded-lg">
                            <h4 class="text-blue-800 font-semibold mb-2" data-en="Note About Excel Format" data-vi="Lưu ý về định dạng Excel">Note About Excel Format</h4>
                            <p class="text-blue-700 text-sm" data-en="You don't need to provide city_id, latitude, and longitude in your Excel file. They will be automatically filled based on the city name." data-vi="Bạn không cần cung cấp city_id, latitude và longitude trong tệp Excel. Chúng sẽ được tự động điền dựa trên tên thành phố.">You don't need to provide city_id, latitude, and longitude in your Excel file. They will be automatically filled based on the city name.</p>
                        </div>

                        <!-- Drag & Drop Area -->
                        <div id="excelDropZone" class="border-2 border-dashed border-gray-300 rounded-xl p-12 transition-colors hover:border-blue-400 hover:bg-blue-50">
                            <div class="space-y-4">
                                <div class="text-6xl text-gray-400">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700" data-en="Drag & Drop Excel File" data-vi="Kéo & Thả File Excel">Drag & Drop Excel File</h3>
                                    <p class="text-gray-500" data-en="or click to browse files" data-vi="hoặc click để chọn file">or click to browse files</p>
                                </div>
                                <div class="text-sm text-gray-400">
                                    <span data-en="Supported formats: .xlsx, .xls" data-vi="Định dạng hỗ trợ: .xlsx, .xls">Supported formats: .xlsx, .xls</span>
                                </div>
                            </div>
                            <input type="file" id="excelFileInput" class="hidden" accept=".xlsx,.xls">
                        </div>

                        <!-- Upload Progress -->
                        <div id="uploadProgress" class="hidden mt-6">
                            <div class="bg-gray-200 rounded-full h-3">
                                <div id="uploadProgressBar" class="bg-blue-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                            </div>
                            <p class="text-sm text-gray-600 mt-2" id="uploadProgressText">Uploading...</p>
                        </div>

                        <!-- Upload Actions -->
                        <div class="flex justify-between pt-6 mt-6 border-t">
                            <button type="button" id="backToChoiceFromExcel" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                <i class="fas fa-arrow-left mr-2"></i>
                                <span data-en="Back" data-vi="Quay Lại">Back</span>
                            </button>
                            <button type="button" id="uploadExcelBtn" class="bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <i class="fas fa-upload mr-2"></i>
                                <span data-en="Upload Excel" data-vi="Upload Excel">Upload Excel</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Add Hotel Modal -->
        <div id="addHotelModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800" data-en="Add New Hotel" data-vi="Thêm Khách Sạn Mới">Add New Hotel</h2>
                        <p class="text-gray-600 mt-1" data-en="Choose how you want to add hotel data" data-vi="Chọn cách bạn muốn thêm dữ liệu khách sạn">Choose how you want to add hotel data</p>
                    </div>
                    <button id="closeAddHotelModal" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <!-- Modal Content - Choice Options -->
                <div id="addHotelChoice" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Manual Add Option -->
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border-2 border-transparent hover:border-blue-300 transition-all cursor-pointer" id="manualAddHotelOption">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-edit text-white text-2xl"></i>
                                </div>
                                <h3 class="text-lg font-semibold text-gray-800 mb-2" data-en="Manual Entry" data-vi="Nhập Thủ Công">Manual Entry</h3>
                                <p class="text-gray-600 text-sm" data-en="Fill out the hotel information form manually" data-vi="Điền thông tin khách sạn bằng form thủ công">Fill out the hotel information form manually</p>
                            </div>
                        </div>

                        <!-- Excel Upload Option -->
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border-2 border-transparent hover:border-green-300 transition-all cursor-pointer" id="hotelExcelUploadOption">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-file-excel text-white text-2xl"></i>
                                </div>
                                <h3 class="text-lg font-semibold text-gray-800 mb-2" data-en="Excel Upload" data-vi="Upload Excel">Excel Upload</h3>
                                <p class="text-gray-600 text-sm" data-en="Upload an Excel file with hotel data" data-vi="Upload file Excel với dữ liệu khách sạn">Upload an Excel file with hotel data</p>
                            </div>
                        </div>
                    </div>

                    <!-- Excel Format Info -->
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6">
                        <div class="flex items-start">
                            <i class="fas fa-info-circle text-yellow-600 mt-1 mr-3"></i>
                            <div>
                                <h4 class="font-semibold text-yellow-800 mb-2" data-en="Excel File Requirements" data-vi="Yêu Cầu File Excel">Excel File Requirements</h4>
                                <p class="text-yellow-700 text-sm mb-2" data-en="Your Excel file must have these columns:" data-vi="File Excel của bạn phải có các cột sau:">Your Excel file must have these columns:</p>
                                <div class="text-xs font-mono bg-yellow-100 p-2 rounded text-yellow-800">
                                    name | city | country | stars | price_per_night | rating | description
                                </div>
                                <p class="text-yellow-700 text-sm mt-2" data-en="Hotel ID will be auto-generated. City ID, latitude, and longitude will be filled automatically." data-vi="Mã khách sạn sẽ được tạo tự động. City ID, vĩ độ và kinh độ sẽ được điền tự động.">Hotel ID will be auto-generated. City ID, latitude, and longitude will be filled automatically.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Manual Form Container (Hidden by default) -->
                <div id="hotelManualFormContainer" class="hidden">
                    <form id="addHotelForm" class="space-y-6">
                        <!-- Hotel ID is now auto-generated -->
                        <div class="grid grid-cols-1 md:grid-cols-1 gap-6">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Hotel Name" data-vi="Tên Khách Sạn">Hotel Name</span>
                                    <span class="text-red-500">*</span>
                                </label>
                                <input type="text" name="name" class="form-control w-full p-3 bg-white" placeholder="The Ritz-Carlton" maxlength="200" required>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="hidden">
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="City ID" data-vi="Mã Thành Phố">City ID</span>
                                </label>
                                <input type="number" name="city_id" id="hotel_city_id" class="form-control w-full p-3 bg-white" placeholder="1">
                                <!-- Thêm hidden input để đảm bảo city_id được submit mà không bắt buộc người dùng nhập -->
                                <input type="hidden" name="city_id_fallback" id="hotel_city_id_fallback" value="0">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Country" data-vi="Quốc Gia">Country</span>
                                    <span class="text-red-500">*</span>
                                </label>
                                <div class="relative">
                                    <input 
                                        type="text" 
                                        name="country" 
                                        id="hotel_country" 
                                        class="form-control w-full p-3 bg-white" 
                                        placeholder="Japan" 
                                        maxlength="100" 
                                        required
                                        autocomplete="off">
                                    <input type="text" id="country_ghost" class="absolute top-0 left-0 w-full p-3 text-gray-300 bg-transparent pointer-events-none" readonly>
                                    <div id="countryAutocomplete" class="absolute bg-white shadow-lg rounded-lg mt-1 w-full z-10 hidden"></div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="City" data-vi="Thành Phố">City</span>
                                    <span class="text-red-500">*</span>
                                </label>
                                <div class="relative">
                                    <input 
                                        type="text" 
                                        name="city" 
                                        id="hotel_city" 
                                        class="form-control w-full p-3 bg-white" 
                                        placeholder="Tokyo" 
                                        maxlength="100" 
                                        required
                                        autocomplete="off">
                                    <input type="text" id="city_ghost" class="absolute top-0 left-0 w-full p-3 text-gray-300 bg-transparent pointer-events-none" readonly>
                                    <div id="cityAutocomplete" class="absolute bg-white shadow-lg rounded-lg mt-1 w-full z-10 hidden"></div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Stars" data-vi="Số sao">Stars</span>
                                </label>
                                <input type="number" name="stars" class="form-control w-full p-3 bg-white" placeholder="4" min="1" max="5" step="1">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Price Per Night" data-vi="Giá Một Đêm">Price Per Night</span>
                                </label>
                                <input type="number" name="price_per_night" class="form-control w-full p-3 bg-white" placeholder="325.00" step="0.01">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Rating" data-vi="Đánh Giá">Rating</span>
                                </label>
                                <input type="number" name="rating" class="form-control w-full p-3 bg-white" placeholder="7.6" step="0.1" min="0" max="10">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 gap-6">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Address Search" data-vi="Tìm Kiếm Địa Chỉ">Address Search</span>
                                </label>
                                <div class="flex space-x-2">
                                    <div class="relative flex-grow">
                                        <input 
                                            type="text" 
                                            id="hotel_address_search" 
                                            class="form-control w-full p-3 bg-white pr-10" 
                                            placeholder="Enter full address..." 
                                            data-en-placeholder="Enter full address..." 
                                            data-vi-placeholder="Nhập địa chỉ đầy đủ...">
                                        <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                            <i class="fas fa-map-marker-alt text-gray-400"></i>
                                        </div>
                                    </div>
                                    <button 
                                        type="button" 
                                        id="geocodeAddressBtn" 
                                        class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded transition-colors">
                                        <i class="fas fa-search mr-1"></i>
                                        <span data-en="Search" data-vi="Tìm">Search</span>
                                    </button>
                                </div>
                                <div id="map" class="w-full h-40 bg-gray-100 rounded-lg mt-3"></div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Latitude" data-vi="Vĩ Độ">Latitude</span>
                                </label>
                                <div class="relative">
                                    <input type="number" id="hotel_latitude" name="latitude" class="form-control w-full p-3 bg-white" placeholder="35.4073" step="0.00000001">
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                        <div id="hotelManualCoordToggle" class="text-blue-500 hover:text-blue-700 cursor-pointer" title="Chỉnh sửa thủ công">
                                            <i class="fas fa-pencil-alt"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <span data-en="Longitude" data-vi="Kinh Độ">Longitude</span>
                                </label>
                                <input type="number" id="hotel_longitude" name="longitude" class="form-control w-full p-3 bg-white" placeholder="139.8833" step="0.00000001">
                            </div>
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <span data-en="Description" data-vi="Mô Tả">Description</span>
                            </label>
                            <textarea name="description" class="form-control w-full p-3 bg-white" rows="3" placeholder="Elegant hotel with excellent amenities..."></textarea>
                        </div>

                        <!-- Form Actions -->
                        <div class="flex justify-between pt-6 border-t">
                            <button type="button" id="backToHotelChoice" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                <i class="fas fa-arrow-left mr-2"></i>
                                <span data-en="Back" data-vi="Quay Lại">Back</span>
                            </button>
                            <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                                <i class="fas fa-save mr-2"></i>
                                <span data-en="Add Hotel" data-vi="Thêm Khách Sạn">Add Hotel</span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Excel Upload Container (Hidden by default) -->
                <div id="hotelExcelUploadContainer" class="hidden">
                    <div class="text-center">
                        <!-- Excel Guidance -->
                        <div class="mb-6 p-4 bg-blue-50 rounded-lg">
                            <h4 class="text-blue-800 font-semibold mb-2" data-en="Note About Excel Format" data-vi="Lưu ý về định dạng Excel">Note About Excel Format</h4>
                            <p class="text-blue-700 text-sm" data-en="You don't need to provide city_id, latitude, and longitude in your Excel file. They will be automatically filled based on the city name." data-vi="Bạn không cần cung cấp city_id, latitude và longitude trong tệp Excel. Chúng sẽ được tự động điền dựa trên tên thành phố.">You don't need to provide city_id, latitude, and longitude in your Excel file. They will be automatically filled based on the city name.</p>
                        </div>

                        <!-- Drag & Drop Area -->
                        <div id="hotelExcelDropZone" class="border-2 border-dashed border-gray-300 rounded-xl p-12 transition-colors hover:border-blue-400 hover:bg-blue-50">
                            <div class="space-y-4">
                                <div class="text-6xl text-gray-400">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700" data-en="Drag & Drop Excel File" data-vi="Kéo & Thả File Excel">Drag & Drop Excel File</h3>
                                    <p class="text-gray-500" data-en="or click to browse files" data-vi="hoặc click để chọn file">or click to browse files</p>
                                </div>
                                <div class="text-sm text-gray-400">
                                    <span data-en="Supported formats: .xlsx, .xls" data-vi="Định dạng hỗ trợ: .xlsx, .xls">Supported formats: .xlsx, .xls</span>
                                </div>
                            </div>
                            <input type="file" id="hotelExcelFileInput" class="hidden" accept=".xlsx,.xls">
                        </div>

                        <!-- Upload Progress -->
                        <div id="uploadProgress" class="hidden mt-6">
                            <div class="bg-gray-200 rounded-full h-3">
                                <div id="uploadProgressBar" class="bg-blue-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                            </div>
                            <p class="text-sm text-gray-600 mt-2" id="uploadProgressText">Uploading...</p>
                        </div>

                        <!-- Upload Actions -->
                        <div class="flex justify-between pt-6 mt-6 border-t">
                            <button type="button" id="backToHotelChoiceFromExcel" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                <i class="fas fa-arrow-left mr-2"></i>
                                <span data-en="Back" data-vi="Quay Lại">Back</span>
                            </button>
                            <button type="button" id="uploadHotelExcelBtn" class="bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <i class="fas fa-upload mr-2"></i>
                                <span data-en="Upload Excel" data-vi="Upload Excel">Upload Excel</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="assets/js/script.js"></script>
        <script src="assets/js/tour-search.js"></script>
        <script src="assets/js/components/tour-history.js"></script>
        <!-- Thêm xử lý lỗi cho Maps API -->
        <script>
            window.handleMapsError = function() {
                console.error("Google Maps API không thể tải - vui lòng kiểm tra quyền truy cập API trong Google Cloud Console");
            }
        </script>
        <script src="assets/js/restaurant-manager.js"></script>
        <script src="assets/js/hotel-form.js"></script>
        <script src="assets/js/hotel-manager.js"></script>
        
        <script>
            // Initialize edit and delete restaurant modals
            document.addEventListener('DOMContentLoaded', function() {
                // Edit restaurant modal
                const editRestaurantModal = document.getElementById('editRestaurantModal');
                const closeEditRestaurantModalBtn = document.getElementById('closeEditRestaurantModal');
                const cancelEditRestaurantBtn = document.getElementById('cancelEditBtn');
                const editRestaurantForm = document.getElementById('editRestaurantForm');
                
                if (closeEditRestaurantModalBtn) {
                    closeEditRestaurantModalBtn.addEventListener('click', closeEditRestaurantModal);
                }
                
                if (cancelEditRestaurantBtn) {
                    cancelEditRestaurantBtn.addEventListener('click', closeEditRestaurantModal);
                }
                
                if (editRestaurantModal) {
                    editRestaurantModal.addEventListener('click', function(e) {
                        if (e.target === editRestaurantModal) {
                            closeEditRestaurantModal();
                        }
                    });
                }
                
                if (editRestaurantForm) {
                    editRestaurantForm.addEventListener('submit', handleEditRestaurantFormSubmit);
                }
                
                // Edit hotel modal
                const editHotelModal = document.getElementById('editHotelModal');
                const closeEditHotelModalBtn = document.getElementById('closeEditHotelModal');
                const cancelEditHotelBtn = document.getElementById('cancelEditHotelBtn');
                const editHotelForm = document.getElementById('editHotelForm');
                
                if (closeEditHotelModalBtn) {
                    closeEditHotelModalBtn.addEventListener('click', closeEditHotelModal);
                }
                
                if (cancelEditHotelBtn) {
                    cancelEditHotelBtn.addEventListener('click', closeEditHotelModal);
                }
                
                if (editHotelModal) {
                    editHotelModal.addEventListener('click', function(e) {
                        if (e.target === editHotelModal) {
                            closeEditHotelModal();
                        }
                    });
                }
                
                if (editHotelForm) {
                    editHotelForm.addEventListener('submit', handleEditHotelFormSubmit);
                }
                
                // Delete confirmation modal
                const deleteModal = document.getElementById('deleteConfirmModal');
                const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
                const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
                
                if (cancelDeleteBtn) {
                    cancelDeleteBtn.addEventListener('click', closeDeleteConfirmModal);
                }
                
                if (confirmDeleteBtn) {
                    confirmDeleteBtn.addEventListener('click', handleDeleteItem);
                }
                
                if (deleteModal) {
                    deleteModal.addEventListener('click', function(e) {
                        if (e.target === deleteModal) {
                            closeDeleteConfirmModal();
                        }
                    });
                }
                
                // Utility functions for modals and forms
                window.closeEditRestaurantModal = function() {
                    const modal = document.getElementById('editRestaurantModal');
                    if (modal) modal.classList.add('hidden');
                };
                
                window.closeEditHotelModal = function() {
                    const modal = document.getElementById('editHotelModal');
                    if (modal) modal.classList.add('hidden');
                };
                
                window.closeDeleteConfirmModal = function() {
                    const modal = document.getElementById('deleteConfirmModal');
                    if (modal) modal.classList.add('hidden');
                };
                
                window.handleEditRestaurantFormSubmit = function(e) {
                    e.preventDefault();
                    // Form submission logic for restaurant editing
                    console.log('Edit restaurant form submitted');
                    // Actual implementation would send data to server
                    closeEditRestaurantModal();
                };
                
                window.handleEditHotelFormSubmit = function(e) {
                    e.preventDefault();
                    // Form submission logic for hotel editing
                    console.log('Edit hotel form submitted');
                    // Actual implementation would send data to server
                    closeEditHotelModal();
                };
                
                window.handleDeleteItem = function() {
                    const itemType = document.getElementById('deleteItemType').value;
                    const itemId = document.getElementById('deleteItemId').value;
                    
                    if (itemType === 'restaurant') {
                        // Delete restaurant logic
                        console.log('Deleting restaurant with ID:', itemId);
                    } else if (itemType === 'hotel') {
                        // Delete hotel logic
                        console.log('Deleting hotel with ID:', itemId);
                    }
                    
                    closeDeleteConfirmModal();
                };
                }
                
                // Add Hotel Button Functionality
                const addHotelBtn = document.getElementById('addHotelBtn');
                const addHotelModal = document.getElementById('addHotelModal');
                const closeAddHotelModalBtn = document.getElementById('closeAddHotelModal');
                const manualAddHotelOption = document.getElementById('manualAddHotelOption');
                const hotelExcelUploadOption = document.getElementById('hotelExcelUploadOption');
                const hotelManualFormContainer = document.getElementById('hotelManualFormContainer');
                const hotelExcelUploadContainer = document.getElementById('hotelExcelUploadContainer');
                const backToHotelChoice = document.getElementById('backToHotelChoice');
                const backToHotelChoiceFromExcel = document.getElementById('backToHotelChoiceFromExcel');
                const addHotelChoice = document.getElementById('addHotelChoice');
                const addHotelForm = document.getElementById('addHotelForm');
                
                if (addHotelBtn) {
                    addHotelBtn.addEventListener('click', function() {
                        if (addHotelModal) {
                            addHotelModal.classList.remove('hidden');
                            // Reset to choice view when opening modal
                            if (addHotelChoice) addHotelChoice.classList.remove('hidden');
                            if (hotelManualFormContainer) hotelManualFormContainer.classList.add('hidden');
                            if (hotelExcelUploadContainer) hotelExcelUploadContainer.classList.add('hidden');
                        }
                    });
                }
                
                if (closeAddHotelModalBtn) {
                    closeAddHotelModalBtn.addEventListener('click', function() {
                        if (addHotelModal) {
                            addHotelModal.classList.add('hidden');
                        }
                    });
                }
                
                if (manualAddHotelOption) {
                    manualAddHotelOption.addEventListener('click', function() {
                        if (addHotelChoice) addHotelChoice.classList.add('hidden');
                        if (hotelManualFormContainer) hotelManualFormContainer.classList.remove('hidden');
                    });
                }
                
                if (hotelExcelUploadOption) {
                    hotelExcelUploadOption.addEventListener('click', function() {
                        if (addHotelChoice) addHotelChoice.classList.add('hidden');
                        if (hotelExcelUploadContainer) hotelExcelUploadContainer.classList.remove('hidden');
                    });
                }
                
                if (backToHotelChoice) {
                    backToHotelChoice.addEventListener('click', function() {
                        if (addHotelChoice) addHotelChoice.classList.remove('hidden');
                        if (hotelManualFormContainer) hotelManualFormContainer.classList.add('hidden');
                    });
                }
                
                if (backToHotelChoiceFromExcel) {
                    backToHotelChoiceFromExcel.addEventListener('click', function() {
                        if (addHotelChoice) addHotelChoice.classList.remove('hidden');
                        if (hotelExcelUploadContainer) hotelExcelUploadContainer.classList.add('hidden');
                    });
                }
                
                if (addHotelForm) {
                    addHotelForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        const formData = new FormData(addHotelForm);
                        console.log('Add hotel form submitted');
                        
                        // Simulate successful submission
                        setTimeout(() => {
                            alert('Hotel added successfully!');
                            addHotelForm.reset();
                            addHotelModal.classList.add('hidden');
                        }, 1000);
                    });
                }
            });
        </script>
        <script>
            // Global getUserConfig function - accessible from anywhere
            const getUserConfig = () => {
                try {
                    // Check cookie first for user's preference from welcome-setup
                    const cookies = document.cookie.split(';');
                    const configCookie = cookies.find(cookie => 
                        cookie.trim().startsWith('vietnam_travel_ui_config=')
                    );
                    
                    if (configCookie) {
                        const configValue = decodeURIComponent(configCookie.split('=')[1]);
                        const config = JSON.parse(configValue);
                        console.log(`🔄 Loading config from user cookie:`, config);
                        return config;
                    }
                    
                    // No localStorage fallback - server only
                } catch (error) {
                    console.log('⚠️ Error loading config from storage:', error);
                }
                
                // Fallback to site_config.json
                try {
                    // Try to access the global config if it was loaded
                    if (window.globalConfig) {
                        const config = {};
                        if (window.globalConfig.theme && window.globalConfig.theme.name) {
                            config.theme = window.globalConfig.theme.name;
                        }
                        if (window.globalConfig.language && window.globalConfig.language.default) {
                            config.language = window.globalConfig.language.default;
                        }
                        if (window.globalConfig.currency && window.globalConfig.currency.default) {
                            config.currency = window.globalConfig.currency.default;
                        }
                        return config;
                    }
                } catch (e) {
                    console.log('⚠️ Error accessing global config');
                }
                
                return {
                    theme: 'sunset',
                    language: 'en',
                    currency: 'USD'
                }; // Default config
            };

            // Enhanced Dashboard functionality
            document.addEventListener('DOMContentLoaded', function () {
                // Check and apply user configuration (theme and language) before anything else
                // Apply user configuration directly to avoid flashing
                const userConfig = getUserConfig();
                if (userConfig) {
                    // Apply theme
                    if (userConfig.theme) {
                        console.log(`🔄 Setting initial theme: ${userConfig.theme}`);
                        document.documentElement.setAttribute('data-theme', userConfig.theme);
                        document.body.className = document.body.className.replace(/theme-\w+/g, '');
                        document.body.classList.add(`theme-${userConfig.theme}`);
                    }
                    
                    // Apply language
                    if (userConfig.language) {
                        console.log(`🔄 Setting initial language: ${userConfig.language}`);
                        window.currentLanguage = userConfig.language;
                        const currentLanguageSpan = document.getElementById('currentLanguage');
                        if (currentLanguageSpan) {
                            currentLanguageSpan.textContent = userConfig.language.toUpperCase();
                        }
                        
                        // Apply language to ALL text elements thoroughly
                        document.querySelectorAll('[data-en][data-vi]').forEach(el => {
                            const key = userConfig.language === 'vi' ? 'data-vi' : 'data-en';
                            if (el.getAttribute(key)) {
                                el.textContent = el.getAttribute(key);
                            }
                        });
                        
                        // Update input placeholders with localized text
                        document.querySelectorAll('input[data-en-placeholder][data-vi-placeholder]').forEach(input => {
                            const placeholderKey = userConfig.language === 'vi' ? 'data-vi-placeholder' : 'data-en-placeholder';
                            input.placeholder = input.getAttribute(placeholderKey);
                        });
                        
                        // Update language indicators in dropdown
                        document.querySelectorAll('.language-option span:last-child').forEach(span => {
                            span.classList.add('hidden');
                        });
                        const selectedLangOption = document.querySelector(`.language-option[data-lang="${userConfig.language}"] span:last-child`);
                        if (selectedLangOption) {
                            selectedLangOption.classList.remove('hidden');
                        }
                        
                        // Update language display if function exists
                        if (typeof updateLanguageDisplay === 'function') {
                            updateLanguageDisplay();
                        }
                    }
                    
                    // Apply currency
                    if (userConfig.currency) {
                        console.log(`🔄 Setting initial currency: ${userConfig.currency}`);
                        window.currentCurrency = userConfig.currency;
                        const currentCurrencySpan = document.getElementById('currentCurrency');
                        if (currentCurrencySpan) {
                            currentCurrencySpan.textContent = userConfig.currency;
                        }
                        // Update currency display if function exists
                        if (typeof updateCurrencyDisplay === 'function') {
                            updateCurrencyDisplay();
                        }
                    }
                }
                
                // Check admin status and show admin button if user is admin
                checkAdminStatus();
                
                // Enhanced logout functionality
                document.getElementById('logoutBtn').addEventListener('click', function () {
                    const message = currentLanguage === 'vi' ?
                        'Bạn có chắc muốn đăng xuất?' :
                        'Are you sure you want to logout?';

                    if (confirm(message)) {
                        // Add fade out animation
                        document.body.style.opacity = '0';
                        document.body.style.transition = 'opacity 0.3s ease';

                        // Call logout API to clear server session
                        fetch('/api/logout', {
                            method: 'POST',
                            credentials: 'include'
                        }).then(response => response.json())
                        .then(data => {
                            console.log('🔓 Server session cleared');
                            
                            // Clear session data but preserve user config for next login
                            // Don't clear vietnam_travel_ui_config cookie as it contains user preferences
                            sessionStorage.clear();
                            
                            setTimeout(() => {
                                window.location.href = 'index.html';
                            }, 300);
                        }).catch(error => {
                            console.error('Error during logout:', error);
                            // Still redirect even if logout API fails
                            sessionStorage.clear();
                            setTimeout(() => {
                                window.location.href = 'index.html';
                            }, 300);
                        });
                    }
                });

                // Admin Panel Button Click Handler
                const adminPanelBtn = document.getElementById('adminPanelBtn');
                if (adminPanelBtn) {
                    adminPanelBtn.addEventListener('click', function() {
                        // Sử dụng đường dẫn tuyệt đối thay vì tương đối
                        window.location.href = '/admin';
                    });
                }

                // Enhanced search history interactions
                document.querySelectorAll('.history-item button').forEach(button => {
                    button.addEventListener('click', function (e) {
                        e.preventDefault();

                        if (this.textContent.includes('Search Again') || this.textContent.includes('Tìm Lại')) {
                            const message = currentLanguage === 'vi' ?
                                'Đang tải lại tìm kiếm...' :
                                'Loading search again...';

                            // Add loading state
                            const originalText = this.innerHTML;
                            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Loading...';
                            this.disabled = true;

                            setTimeout(() => {
                                this.innerHTML = originalText;
                                this.disabled = false;
                                alert(message);
                            }, 1500);
                        }
                    });
                });

                // Enhanced minimize functionality for search results
                document.addEventListener('click', function(e) {
                    if (e.target.closest('#minimizeHotelResults')) {
                        const resultsContainer = document.getElementById('hotelResults');
                        const hotelList = document.getElementById('hotelList');
                        const minimizeBtn = document.getElementById('minimizeHotelResults');
                        const icon = minimizeBtn.querySelector('i');
                        
                        if (hotelList.style.display === 'none') {
                            // Expand
                            hotelList.style.display = 'grid';
                            resultsContainer.classList.remove('minimized');
                            icon.className = 'fas fa-minus text-gray-600';
                            minimizeBtn.title = 'Minimize results';
                        } else {
                            // Minimize
                            hotelList.style.display = 'none';
                            resultsContainer.classList.add('minimized');
                            icon.className = 'fas fa-plus text-gray-600';
                            minimizeBtn.title = 'Expand results';
                        }
                    }
                    
                    if (e.target.closest('#minimizeRestaurantResults')) {
                        const resultsContainer = document.getElementById('restaurantResults');
                        const restaurantList = document.getElementById('restaurantList');
                        const minimizeBtn = document.getElementById('minimizeRestaurantResults');
                        const icon = minimizeBtn.querySelector('i');
                        
                        if (restaurantList.style.display === 'none') {
                            // Expand
                            restaurantList.style.display = 'grid';
                            resultsContainer.classList.remove('minimized');
                            icon.className = 'fas fa-minus text-gray-600';
                            minimizeBtn.title = 'Minimize results';
                        } else {
                            // Minimize
                            restaurantList.style.display = 'none';
                            resultsContainer.classList.add('minimized');
                            icon.className = 'fas fa-plus text-gray-600';
                            minimizeBtn.title = 'Expand results';
                        }
                    }
                });

                // Enhanced Currency/Language/Theme handlers with UI Config integration
                document.querySelectorAll('.currency-option').forEach(button => {
                    button.addEventListener('click', function() {
                        const currency = this.getAttribute('data-currency');
                        if (currency) {
                            // Get the current complete config first
                            const currentConfig = getUserConfig();
                            
                            // Update only the currency property, keeping other properties intact
                            if (window.uiConfig) {
                                window.uiConfig.updateConfig('currency', currency);
                            } else {
                                // Fallback if uiConfig not available - update cookie directly
                                currentConfig.currency = currency;
                                
                                // Save updated config to cookie
                                const expiryDate = new Date();
                                expiryDate.setFullYear(expiryDate.getFullYear() + 1);
                                document.cookie = `vietnam_travel_ui_config=${encodeURIComponent(JSON.stringify(currentConfig))}; expires=${expiryDate.toUTCString()}; path=/; SameSite=Strict`;
                                
                                console.log('✅ Updated currency while preserving other settings');
                            }
                        }
                        hideDropdown();
                    });
                });

                // Add Restaurant Modal Functionality
                initializeAddRestaurantModal();
                
                // Updated language option click handlers to preserve all cookie properties
                document.querySelectorAll('.language-option').forEach(button => {
                    button.addEventListener('click', function() {
                        const language = this.getAttribute('data-lang');
                        if (language) {
                            // Get the current complete config first
                            const currentConfig = getUserConfig();
                            
                            // Update only the language property, keeping other properties intact
                            if (window.uiConfig) {
                                window.uiConfig.updateConfig('language', language);
                            } else {
                                // Fallback if uiConfig not available - update cookie directly
                                currentConfig.language = language;
                                
                                // Save updated config to cookie
                                const expiryDate = new Date();
                                expiryDate.setFullYear(expiryDate.getFullYear() + 1);
                                document.cookie = `vietnam_travel_ui_config=${encodeURIComponent(JSON.stringify(currentConfig))}; expires=${expiryDate.toUTCString()}; path=/; SameSite=Strict`;
                                
                                console.log('✅ Updated language while preserving other settings');
                            }
                        }
                        hideDropdown();
                    });
                });
                
                // Theme buttons click handlers
                document.querySelectorAll('.theme-option').forEach(button => {
                    button.addEventListener('click', function() {
                        const theme = this.getAttribute('data-theme');
                        if (theme && window.uiConfig) {
                            // Update theme using UI Config
                            window.uiConfig.updateConfig('theme', theme);
                            
                            // Apply theme immediately without reloading
                            document.documentElement.setAttribute('data-theme', theme);
                            document.body.className = document.body.className.replace(/theme-\w+/g, '');
                            document.body.classList.add(`theme-${theme}`);
                            
                            // Update user config storage
                            try {
                                // Update cookie storage
                                const cookies = document.cookie.split(';');
                                const configCookie = cookies.find(cookie => 
                                    cookie.trim().startsWith('vietnam_travel_ui_config=')
                                );
                                
                                if (configCookie) {
                                    const configValue = decodeURIComponent(configCookie.split('=')[1]);
                                    const config = JSON.parse(configValue);
                                    config.theme = theme;
                                    
                                    // Set updated cookie
                                    const expiryDate = new Date();
                                    expiryDate.setFullYear(expiryDate.getFullYear() + 1);
                                    document.cookie = `vietnam_travel_ui_config=${encodeURIComponent(JSON.stringify(config))}; expires=${expiryDate.toUTCString()}; path=/; SameSite=Strict`;
                                    
                                    console.log(`✅ Updated theme in cookie storage: ${theme}`);
                                }
                                
                                // No localStorage update needed - server manages state
                            } catch (error) {
                                console.log('⚠️ Error updating theme in storage:', error);
                            }
                        }
                        hideDropdown();
                    });
                });
                
                // Custom Interface button
                const customizeBtn = document.getElementById('customizeInterface');
                if (customizeBtn && window.uiConfig) {
                    customizeBtn.addEventListener('click', function() {
                        // Show interface settings modal
                        window.uiConfig.showInterfaceSettings();
                        hideDropdown();
                    });
                }
                
                function hideDropdown() {
                    const dropdown = document.getElementById('currencyLanguageDropdown');
                    if (dropdown) dropdown.classList.add('hidden');
                }
            });
            
            // Function to check admin status
            function checkAdminStatus() {
                // ALWAYS require proper admin check - NO LOCAL MODE BYPASS
                console.log('🔐 Checking admin privileges...');
                
                // Try to load user data from session storage first
                loadUserDataFromSession();
                
                try {
                    fetch('/api/check-admin', {
                        credentials: 'include' // Include session cookies
                    })
                        .then(response => {
                            if (!response.ok) {
                                throw new Error(`API call failed: ${response.status}`);
                            }
                            return response.json();
                        })
                        .then(data => {
                            console.log('🔍 Admin check response:', data);
                            
                            const adminPanelBtn = document.getElementById('adminPanelBtn');
                            const addRestaurantBtn = document.getElementById('addRestaurantBtn');
                            const addHotelBtn = document.getElementById('addHotelBtn');
                            
                            if (data.is_admin === true) {
                                // Show admin panel button ONLY for real admins
                                if (adminPanelBtn) {
                                    adminPanelBtn.classList.remove('hidden');
                                    adminPanelBtn.style.display = 'flex';
                                }
                                // Show add restaurant button for admins
                                if (addRestaurantBtn) {
                                    addRestaurantBtn.classList.remove('hidden');
                                    addRestaurantBtn.style.display = 'flex';
                                }
                                // Show add hotel button for admins
                                if (addHotelBtn) {
                                    addHotelBtn.classList.remove('hidden');
                                    addHotelBtn.style.display = 'flex';
                                }
                                console.log('✅ Admin access granted - is_admin = true');
                            } else {
                                console.log('👤 Regular user - no admin access (is_admin = false or undefined)');
                                // Ensure admin buttons stay hidden
                                if (adminPanelBtn) {
                                    adminPanelBtn.classList.add('hidden');
                                    adminPanelBtn.style.display = 'none';
                                }
                                if (addRestaurantBtn) {
                                    addRestaurantBtn.classList.add('hidden');
                                    addRestaurantBtn.style.display = 'none';
                                }
                                if (addHotelBtn) {
                                    addHotelBtn.classList.add('hidden');
                                    addHotelBtn.style.display = 'none';
                                }
                            }
                            
                            // Update user display information and save to session
                            if (data.user_name && data.email) {
                                updateUserDisplay(data.user_name, data.email);
                                // Save to session storage for future use
                                sessionStorage.setItem('user_session_data', JSON.stringify({
                                    name: data.user_name,
                                    email: data.email,
                                    is_admin: data.is_admin
                                }));
                            }
                        })
                        .catch(error => {
                            console.log('❌ Error checking admin status:', error);
                            console.log('🚫 Admin panel will remain hidden due to error');
                            
                            // NO FALLBACK - Keep admin buttons hidden on error
                            const adminPanelBtn = document.getElementById('adminPanelBtn');
                            const addRestaurantBtn = document.getElementById('addRestaurantBtn');
                            const addHotelBtn = document.getElementById('addHotelBtn');
                            if (adminPanelBtn) {
                                adminPanelBtn.classList.add('hidden');
                                adminPanelBtn.style.display = 'none';
                            }
                            if (addRestaurantBtn) {
                                addRestaurantBtn.classList.add('hidden');
                                addRestaurantBtn.style.display = 'none';
                            }
                            if (addHotelBtn) {
                                addHotelBtn.classList.add('hidden');
                                addHotelBtn.style.display = 'none';
                            }
                        });
                } catch (e) {
                    console.log('❌ General error in admin check:', e);
                    console.log('🚫 Admin panel will remain hidden due to exception');
                    
                    // NO FALLBACK - Keep admin buttons hidden on exception
                    const adminPanelBtn = document.getElementById('adminPanelBtn');
                    const addRestaurantBtn = document.getElementById('addRestaurantBtn');
                    const addHotelBtn = document.getElementById('addHotelBtn');
                    if (adminPanelBtn) {
                        adminPanelBtn.classList.add('hidden');
                        adminPanelBtn.style.display = 'none';
                    }
                    if (addRestaurantBtn) {
                        addRestaurantBtn.classList.add('hidden');
                        addRestaurantBtn.style.display = 'none';
                    }
                    if (addHotelBtn) {
                        addHotelBtn.classList.add('hidden');
                        addHotelBtn.style.display = 'none';
                    }
                }
            }
            
            // Function to load user data from session storage
            function loadUserDataFromSession() {
                try {
                    const sessionData = sessionStorage.getItem('user_session_data');
                    if (sessionData) {
                        const userData = JSON.parse(sessionData);
                        console.log('📱 Loading user data from session:', userData);
                        if (userData.name && userData.email) {
                            updateUserDisplay(userData.name, userData.email);
                        }
                    }
                } catch (error) {
                    console.log('⚠️ Error loading session data:', error);
                }
            }
            
            // Function to update user display information from real data
            function updateUserDisplay(userName, userEmail) {
                console.log('🔄 Updating user display with:', {userName, userEmail});
                if (!userName || !userEmail) {
                    console.log('⚠️ Missing userName or userEmail, skipping update');
                    return;
                }
                
                // Update user name display
                const userNameElement = document.getElementById('currentUserName');
                if (userNameElement) {
                    userNameElement.textContent = userName;
                    userNameElement.setAttribute('data-en', userName);
                    userNameElement.setAttribute('data-vi', userName);
                    console.log('✅ Updated user name element');
                }
                
                // Update user email display
                const userEmailElement = document.getElementById('currentUserEmail');
                if (userEmailElement) {
                    userEmailElement.textContent = userEmail;
                    console.log('✅ Updated user email element');
                }
                
                // Update welcome message
                const welcomeElement = document.getElementById('welcomeMessage');
                if (welcomeElement) {
                    const currentLang = window.currentLanguage || 'en';
                    if (currentLang === 'vi') {
                        welcomeElement.textContent = `Chào mừng trở lại, ${userName}!`;
                    } else {
                        welcomeElement.textContent = `Welcome back, ${userName}!`;
                    }
                    welcomeElement.setAttribute('data-en', `Welcome back, ${userName}!`);
                    welcomeElement.setAttribute('data-vi', `Chào mừng trở lại, ${userName}!`);
                    console.log('✅ Updated welcome message');
                }
                
                // Update avatar initial
                const avatarElement = document.querySelector('.w-8.h-8.bg-gradient-to-r.from-blue-500.to-purple-600.rounded-full');
                if (avatarElement && userName) {
                    avatarElement.textContent = userName.charAt(0).toUpperCase();
                    console.log('✅ Updated avatar initial');
                }
            }

            // Website Setup Dropdown Functionality - Initialize after slight delay
            setTimeout(() => {
                console.log('🔧 Initializing Website Setup Dropdown...');
                const websiteSetupBtn = document.getElementById('websiteSetupBtn');
                const websiteSetupDropdown = document.getElementById('websiteSetupDropdown');
                
                console.log('������ Website Setup Button:', websiteSetupBtn);
                console.log('🎯 Website Setup Dropdown:', websiteSetupDropdown);
                
                if (websiteSetupBtn && websiteSetupDropdown) {
                    console.log('✅ Both setup elements found, attaching events...');
                    
                    // Store current selections for comparison
                    // First get the complete config from cookie to ensure all properties are preserved
                    const completeConfig = getUserConfig();
                    let currentSelections = {
                        language: window.currentLanguage || completeConfig.language || 'en',
                        currency: window.currentCurrency || completeConfig.currency || 'USD',
                        theme: completeConfig.theme || getCurrentTheme()
                    };
                    
                    // Initial setup of indicators based on cookie values
                    // Read from cookie directly for maximum reliability
                    try {
                        const cookies = document.cookie.split(';');
                        const configCookie = cookies.find(cookie => 
                            cookie.trim().startsWith('vietnam_travel_ui_config=')
                        );
                        
                        if (configCookie) {
                            const configValue = decodeURIComponent(configCookie.split('=')[1]);
                            const config = JSON.parse(configValue);
                            console.log(`🍪 Reading initial selections from cookie:`, config);
                            
                            // Override with cookie values
                            if (config.language) currentSelections.language = config.language;
                            if (config.currency) currentSelections.currency = config.currency;
                            if (config.theme) currentSelections.theme = config.theme;
                        }
                    } catch (error) {
                        console.log('⚠️ Error reading initial selections from cookie:', error);
                    }
                    
                    // Update indicator displays on dropdown open
                    function updateIndicators() {
                        console.log('🔄 Updating indicators with current selections:', currentSelections);
                        
                        // Update language indicators
                        document.querySelectorAll('.language-option span:last-child').forEach(span => span.classList.add('hidden'));
                        const currentLangBtn = document.querySelector(`.language-option[data-lang="${currentSelections.language}"] span:last-child`);
                        if (currentLangBtn) currentLangBtn.classList.remove('hidden');
                        
                        // Update currency indicators
                        document.querySelectorAll('.currency-option span:last-child').forEach(span => span.classList.add('hidden'));
                        const currentCurrBtn = document.querySelector(`.currency-option[data-currency="${currentSelections.currency}"] span:last-child`);
                        if (currentCurrBtn) currentCurrBtn.classList.remove('hidden');
                        
                        // Update theme indicators
                        document.querySelectorAll('.theme-option span:last-child').forEach(span => span.classList.add('hidden'));
                        const currentThemeBtn = document.querySelector(`.theme-option[data-theme="${currentSelections.theme}"] span:last-child`);
                        if (currentThemeBtn) currentThemeBtn.classList.remove('hidden');
                    }
                    
                    // Toggle dropdown
                    websiteSetupBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('🖱️ Setup button clicked');
                        websiteSetupDropdown.classList.toggle('hidden');
                        if (!websiteSetupDropdown.classList.contains('hidden')) {
                            updateIndicators();
                        }
                    });
                    
                    // Close dropdown when clicking outside
                    document.addEventListener('click', function(e) {
                        if (!websiteSetupBtn.contains(e.target) && !websiteSetupDropdown.contains(e.target)) {
                            websiteSetupDropdown.classList.add('hidden');
                        }
                    });
                    
                    // Language option handlers - update selection without immediate apply
                    document.querySelectorAll('.language-option').forEach(button => {
                        button.addEventListener('click', function(e) {
                            e.preventDefault();
                            const lang = this.getAttribute('data-lang');
                            console.log('🌐 Language selected:', lang);
                            currentSelections.language = lang;
                            updateIndicators();
                        });
                    });
                    
                    // Currency option handlers - update selection without immediate apply
                    document.querySelectorAll('.currency-option').forEach(button => {
                        button.addEventListener('click', function(e) {
                            e.preventDefault();
                            const currency = this.getAttribute('data-currency');
                            console.log('💰 Currency selected:', currency);
                            currentSelections.currency = currency;
                            updateIndicators();
                        });
                    });
                    
                    // Theme option handlers - update selection without immediate apply
                    document.querySelectorAll('.theme-option').forEach(button => {
                        button.addEventListener('click', function(e) {
                            e.preventDefault();
                            const theme = this.getAttribute('data-theme');
                            console.log('🎨 Theme selected:', theme);
                            currentSelections.theme = theme;
                            updateIndicators();
                        });
                    });
                    
                    // Apply Changes Button
                    const applyChangesBtn = document.getElementById('applyChangesBtn');
                    if (applyChangesBtn) {
                        applyChangesBtn.addEventListener('click', function(e) {
                            e.preventDefault();
                            console.log('✅ Applying changes:', currentSelections);
                            
                            // Get the complete current config to preserve all settings
                            const currentConfig = getUserConfig();
                            
                            let needsRefresh = false;
                            let changesApplied = [];
                            
                            // Apply language changes (immediate) - PRESERVE ALL COOKIE PROPERTIES
                            console.log('🔍 DEBUG: Checking language change -', 'currentSelections.language:', currentSelections.language, 'window.currentLanguage:', window.currentLanguage || 'en');
                            
                            // ALWAYS save to cookie to ensure sync, regardless of current language
                            console.log('🍪 FORCE SAVING LANGUAGE TO COOKIE TO SYNC...');
                            saveUserPreference('language', currentSelections.language);
                            
                            if (currentSelections.language !== (window.currentLanguage || 'en')) {
                                console.log('🌐 Applying language change:', currentSelections.language);
                                window.currentLanguage = currentSelections.language;
                                
                                // Then use unified preferences system
                                if (typeof updateLanguage === 'function') {
                                    console.log('🔄 Calling updateLanguage function');
                                    updateLanguage(currentSelections.language);
                                }
                                if (typeof updateLanguageDisplay === 'function') {
                                    console.log('🔄 Calling updateLanguageDisplay function');
                                    updateLanguageDisplay();
                                }
                                
                                changesApplied.push('Language');
                            } else {
                                console.log('🔄 Language same as current but cookie synced:', currentSelections.language);
                                // Still call updateLanguage to ensure UI consistency  
                                if (typeof updateLanguage === 'function') {
                                    console.log('🔄 Calling updateLanguage for UI sync');
                                    updateLanguage(currentSelections.language);
                                }
                                if (typeof updateLanguageDisplay === 'function') {
                                    console.log('🔄 Calling updateLanguageDisplay for UI sync');
                                    updateLanguageDisplay();
                                }
                                changesApplied.push('Language (synced)');
                            }
                            
                            // Apply currency changes (immediate)
                            if (currentSelections.currency !== (window.currentCurrency || 'USD')) {
                                console.log('💰 Applying currency change:', currentSelections.currency);
                                window.currentCurrency = currentSelections.currency;
                                // Use unified preferences system
                                if (typeof updateCurrency === 'function') {
                                    updateCurrency(currentSelections.currency);
                                }
                                if (typeof updateCurrencyDisplay === 'function') {
                                    updateCurrencyDisplay();
                                }
                                saveUserPreference('currency', currentSelections.currency);
                                changesApplied.push('Currency');
                            }
                            
                            // Apply theme changes (requires refresh)
                            const currentTheme = getCurrentTheme();
                            if (currentSelections.theme !== currentTheme) {
                                console.log('🎨 Applying theme change:', currentSelections.theme);
                                // Save theme preference
                                saveUserPreference('theme', currentSelections.theme);
                                needsRefresh = true;
                                changesApplied.push('Theme');
                            }
                            
                            // Show confirmation and refresh if needed
                            if (changesApplied.length > 0) {
                                const currentLang = window.currentLanguage || 'en';
                                const messages = {
                                    en: {
                                        success: `${changesApplied.join(', ')} updated successfully!`,
                                        refreshing: 'Refreshing page to apply theme changes...'
                                    },
                                    vi: {
                                        success: `Đã cập nhật ${changesApplied.join(', ')} thành công!`,
                                        refreshing: 'Đang tải lại trang để áp dụng thay đổi theme...'
                                    }
                                };
                                
                                alert(messages[currentLang].success);
                                
                                if (needsRefresh) {
                                    alert(messages[currentLang].refreshing);
                                    setTimeout(() => {
                                        window.location.reload();
                                    }, 1000);
                                }
                            }
                            
                            websiteSetupDropdown.classList.add('hidden');
                        });
                    }
                    
                    // Cancel Changes Button
                    const cancelChangesBtn = document.getElementById('cancelChangesBtn');
                    if (cancelChangesBtn) {
                        cancelChangesBtn.addEventListener('click', function(e) {
                            e.preventDefault();
                            console.log('❌ Cancelling changes');
                            // Reset selections to current values
                            // Get complete config from cookie to ensure all properties are preserved
                            const completeConfig = getUserConfig();
                            currentSelections = {
                                language: window.currentLanguage || completeConfig.language || 'en',
                                currency: window.currentCurrency || completeConfig.currency || 'USD',
                                theme: completeConfig.theme || getCurrentTheme()
                            };
                            updateIndicators();
                            websiteSetupDropdown.classList.add('hidden');
                        });
                    }
                    
                } else {
                    console.log('❌ Could not find setup dropdown elements');
                    console.log('🔍 Available elements with setup in ID:', document.querySelectorAll('[id*="setup"]'));
                }
            }, 500); // Wait 500ms for DOM to be fully ready
            
            // Helper function to get current theme
            function getCurrentTheme() {
                const theme = document.documentElement.getAttribute('data-theme');
                console.log('🔍 Current theme detected:', theme);
                return theme || 'sunset';
            }
            
            // Helper function to save user preferences - UNIFIED with main script.js system
            function saveUserPreference(key, value) {
                try {
                    // Use vietnam_travel_ui_config for all pages
                    let currentConfig = {};
                    try {
                        const cookies = document.cookie.split(';');
                        const configCookie = cookies.find(cookie => 
                            cookie.trim().startsWith('vietnam_travel_ui_config=')
                        );
                        if (configCookie) {
                            const configValue = decodeURIComponent(configCookie.split('=')[1]);
                            currentConfig = JSON.parse(configValue);
                        }
                    } catch (e) {
                        console.log('🍪 Creating new unified preferences config for:', key);
                        // Default preferences to match script.js - include theme and keep all standard properties
                        currentConfig = { language: 'en', currency: 'USD', theme: 'sunset', setupCompleted: true };
                    }
                    
                    // Update preference in unified config
                    currentConfig[key] = value;
                    
                    // Save to unified preferences cookie (same as script.js)
                    const cookieValue = JSON.stringify(currentConfig);
                    const expiryDate = new Date();
                    expiryDate.setFullYear(expiryDate.getFullYear() + 1);
                    document.cookie = `vietnam_travel_ui_config=${encodeURIComponent(cookieValue)}; expires=${expiryDate.toUTCString()}; path=/; SameSite=Strict`;
                    
                    console.log(`🍪 UNIFIED: ${key.charAt(0).toUpperCase() + key.slice(1)} preference saved to vietnam_travel_ui_config: ${value}`);
                    console.log(`🍪 Full unified preferences:`, currentConfig);
                    
                    // Show confirmation
                    const messages = {
                        theme: { en: 'Theme saved successfully!', vi: 'Đã lưu giao diện thành công!' },
                        language: { en: 'Language saved successfully!', vi: 'Đã lưu ngôn ngữ thành công!' },
                        currency: { en: 'Currency saved successfully!', vi: 'Đã lưu tiền tệ thành công!' }
                    };
                    
                    const currentLang = window.currentLanguage || 'en';
                    const message = messages[key] ? messages[key][currentLang] : `${key} saved successfully!`;
                    
                    if (typeof showNotification === 'function') {
                        showNotification(message, 'success');
                    } else {
                        console.log(`✅ ${message}`);
                    }
                    
                } catch (error) {
                    console.error(`❌ Error saving ${key} preference:`, error);
                }
            }

            // Add Restaurant Modal Functions
            function initializeAddRestaurantModal() {
                const addRestaurantBtn = document.getElementById('addRestaurantBtn');
                const modal = document.getElementById('addRestaurantModal');
                const closeModalBtn = document.getElementById('closeAddRestaurantModal');
                const manualAddOption = document.getElementById('manualAddOption');
                const excelUploadOption = document.getElementById('excelUploadOption');
                const addRestaurantChoice = document.getElementById('addRestaurantChoice');
                const manualFormContainer = document.getElementById('manualFormContainer');
                const excelUploadContainer = document.getElementById('excelUploadContainer');
                const backToChoice = document.getElementById('backToChoice');
                const backToChoiceFromExcel = document.getElementById('backToChoiceFromExcel');
                const addRestaurantForm = document.getElementById('addRestaurantForm');
                const excelDropZone = document.getElementById('excelDropZone');
                const excelFileInput = document.getElementById('excelFileInput');
                const uploadExcelBtn = document.getElementById('uploadExcelBtn');

                // Open modal
                if (addRestaurantBtn) {
                    addRestaurantBtn.addEventListener('click', function() {
                        modal.classList.remove('hidden');
                        resetModal();
                    });
                }

                // Close modal
                if (closeModalBtn) {
                    closeModalBtn.addEventListener('click', function() {
                        modal.classList.add('hidden');
                        resetModal();
                    });
                }

                // Close modal when clicking outside
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                        resetModal();
                    }
                });

                // Manual add option
                if (manualAddOption) {
                    manualAddOption.addEventListener('click', function() {
                        addRestaurantChoice.classList.add('hidden');
                        manualFormContainer.classList.remove('hidden');
                    });
                }

                // Excel upload option
                if (excelUploadOption) {
                    excelUploadOption.addEventListener('click', function() {
                        addRestaurantChoice.classList.add('hidden');
                        excelUploadContainer.classList.remove('hidden');
                    });
                }

                // Back to choice buttons
                if (backToChoice) {
                    backToChoice.addEventListener('click', function() {
                        manualFormContainer.classList.add('hidden');
                        addRestaurantChoice.classList.remove('hidden');
                    });
                }

                if (backToChoiceFromExcel) {
                    backToChoiceFromExcel.addEventListener('click', function() {
                        excelUploadContainer.classList.add('hidden');
                        addRestaurantChoice.classList.remove('hidden');
                        resetExcelUpload();
                    });
                }

                // Manual form submission
                if (addRestaurantForm) {
                    addRestaurantForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        handleManualAddRestaurant(this);
                    });
                }

                // Excel drag & drop
                if (excelDropZone && excelFileInput) {
                    excelDropZone.addEventListener('click', function() {
                        excelFileInput.click();
                    });

                    excelDropZone.addEventListener('dragover', function(e) {
                        e.preventDefault();
                        this.classList.add('border-blue-400', 'bg-blue-50');
                    });

                    excelDropZone.addEventListener('dragleave', function(e) {
                        e.preventDefault();
                        this.classList.remove('border-blue-400', 'bg-blue-50');
                    });

                    excelDropZone.addEventListener('drop', function(e) {
                        e.preventDefault();
                        this.classList.remove('border-blue-400', 'bg-blue-50');
                        const files = e.dataTransfer.files;
                        if (files.length > 0) {
                            handleExcelFileSelect(files[0]);
                        }
                    });

                    excelFileInput.addEventListener('change', function(e) {
                        if (e.target.files.length > 0) {
                            handleExcelFileSelect(e.target.files[0]);
                        }
                    });
                }

                // Excel upload button
                if (uploadExcelBtn) {
                    uploadExcelBtn.addEventListener('click', function() {
                        handleExcelUpload();
                    });
                }

                function resetModal() {
                    addRestaurantChoice.classList.remove('hidden');
                    manualFormContainer.classList.add('hidden');
                    excelUploadContainer.classList.add('hidden');
                    if (addRestaurantForm) addRestaurantForm.reset();
                    resetExcelUpload();
                }

                function resetExcelUpload() {
                    if (excelFileInput) excelFileInput.value = '';
                    if (uploadExcelBtn) {
                        uploadExcelBtn.disabled = true;
                        uploadExcelBtn.innerHTML = '<i class="fas fa-upload mr-2"></i><span data-en="Upload Excel" data-vi="Upload Excel">Upload Excel</span>';
                    }
                    const uploadProgress = document.getElementById('uploadProgress');
                    if (uploadProgress) uploadProgress.classList.add('hidden');
                }

                function handleExcelFileSelect(file) {
                    const allowedTypes = [
                        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
                        'application/vnd.ms-excel'
                    ];

                    if (!allowedTypes.includes(file.type)) {
                        alert(window.currentLanguage === 'vi' ? 
                            'Vui lòng chọn file Excel (.xlsx hoặc .xls)' : 
                            'Please select an Excel file (.xlsx or .xls)');
                        return;
                    }

                    if (uploadExcelBtn) {
                        uploadExcelBtn.disabled = false;
                        uploadExcelBtn.innerHTML = `<i class="fas fa-upload mr-2"></i><span data-en="Upload ${file.name}" data-vi="Upload ${file.name}">Upload ${file.name}</span>`;
                    }
                }

                async function handleManualAddRestaurant(form) {
                    const formData = new FormData(form);
                    const restaurantData = {};
                    
                    for (let [key, value] of formData.entries()) {
                        restaurantData[key] = value || null;
                    }

                    try {
                        const response = await fetch('/api/admin/restaurants/add', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            credentials: 'include',
                            body: JSON.stringify(restaurantData)
                        });

                        const result = await response.json();

                        if (response.ok) {
                            alert(window.currentLanguage === 'vi' ? 
                                'Thêm nhà hàng thành công!' : 
                                'Restaurant added successfully!');
                            modal.classList.add('hidden');
                            resetModal();
                        } else {
                            alert(result.message || (window.currentLanguage === 'vi' ? 
                                'Có lỗi xảy ra khi thêm nhà hàng' : 
                                'Error adding restaurant'));
                        }
                    } catch (error) {
                        console.error('Error adding restaurant:', error);
                        alert(window.currentLanguage === 'vi' ? 
                            'Có lỗi xảy ra khi thêm nhà hàng' : 
                            'Error adding restaurant');
                    }
                }

                async function handleExcelUpload() {
                    const fileInput = document.getElementById('excelFileInput');
                    const file = fileInput.files[0];

                    if (!file) {
                        alert(window.currentLanguage === 'vi' ? 
                            'Vui lòng chọn file Excel' : 
                            'Please select an Excel file');
                        return;
                    }

                    const formData = new FormData();
                    formData.append('excel_file', file);

                    const uploadProgress = document.getElementById('uploadProgress');
                    const uploadProgressBar = document.getElementById('uploadProgressBar');
                    const uploadProgressText = document.getElementById('uploadProgressText');

                    try {
                        uploadProgress.classList.remove('hidden');
                        uploadProgressBar.style.width = '0%';
                        uploadProgressText.textContent = window.currentLanguage === 'vi' ? 'Đang upload...' : 'Uploading...';

                        const response = await fetch('/api/admin/restaurants/upload-excel', {
                            method: 'POST',
                            credentials: 'include',
                            body: formData
                        });

                        uploadProgressBar.style.width = '100%';

                        const result = await response.json();

                        if (response.ok) {
                            uploadProgressText.textContent = window.currentLanguage === 'vi' ? 
                                `Thành công! Đã thêm ${result.added_count || 0} nhà hàng` : 
                                `Success! Added ${result.added_count || 0} restaurants`;
                            
                            setTimeout(() => {
                                modal.classList.add('hidden');
                                resetModal();
                            }, 2000);
                        } else {
                            uploadProgressText.textContent = result.message || (window.currentLanguage === 'vi' ? 
                                'Có lỗi xảy ra' : 'Error occurred');
                        }
                    } catch (error) {
                        console.error('Error uploading Excel:', error);
                        uploadProgressText.textContent = window.currentLanguage === 'vi' ? 
                            'Có lỗi xảy ra khi upload' : 
                            'Error uploading file';
                    }
                }
            }
        </script>
        
        <!-- Date and Time Pickers and Ghost Text -->
        <script src="assets/js/pickers/datepicker.js"></script>
        <script src="assets/js/pickers/ghost-text.js"></script>
        <script src="assets/js/tour-form.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Initialize date and time pickers
                initializeDateTimePickers();
                
                // Initialize ghost text functionality
                initializeAllGhostText();
            });
        </script>
    </body>

    </html>